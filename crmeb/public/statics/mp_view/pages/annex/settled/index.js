require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/annex/settled/index"],{"04fd":function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var n={jyfParser:function(){return Promise.all([e.e("common/vendor"),e.e("components/jyf-parser/jyf-parser")]).then(e.bind(null,"798d"))}},s=function(){var t=this,i=t.$createElement,e=(t._self._c,-1==t.status&&!t.inloading&&t.isAgent?t.$t("代理商名称"):null),n=-1==t.status&&!t.inloading&&t.isAgent?t.$t("请输入代理商名称"):null,s=-1==t.status&&!t.inloading&&t.isAgent?t.$t("用户姓名"):null,a=-1==t.status&&!t.inloading&&t.isAgent?t.$t("请输入姓名"):null,o=-1==t.status&&!t.inloading&&t.isAgent?t.$t("联系电话"):null,u=-1==t.status&&!t.inloading&&t.isAgent?t.$t("请输入手机号"):null,r=-1==t.status&&!t.inloading&&t.isAgent?t.$t("验证码"):null,l=-1==t.status&&!t.inloading&&t.isAgent?t.$t("填写验证码"):null,c=-1==t.status&&!t.inloading&&t.isAgent?t.$t("邀请码"):null,d=-1==t.status&&!t.inloading&&t.isAgent?t.$t("请输入代理商邀请码"):null,h=-1==t.status&&!t.inloading&&t.isAgent?t.$t("请上传营业执照及行业相关资质证明图片"):null,g=-1==t.status&&!t.inloading&&t.isAgent?t.$t("图片最多可上传10张,图片格式支持JPG、PNG、JPEG"):null,f=-1==t.status&&!t.inloading&&t.isAgent?t.images.length:null,m=-1==t.status&&!t.inloading&&t.isAgent&&f<10?t.$t("上传图片"):null,p=-1==t.status&&!t.inloading&&t.isAgent?t.$t("已阅读并同意"):null,$=-1==t.status&&!t.inloading&&t.isAgent?t.$t("代理商协议"):null,v=-1==t.status&&!t.inloading&&t.isAgent?t.$t("提交申请"):null,A=-1!=t.status||t.inloading||t.isAgent?null:t.$t("用户昵称"),y=-1!=t.status||t.inloading||t.isAgent?null:t.$t("用户ID"),b=-1!=t.status||t.inloading||t.isAgent?null:t.$t("分销员姓名"),_=-1!=t.status||t.inloading||t.isAgent?null:t.$t("请输入分销员姓名"),w=-1!=t.status||t.inloading||t.isAgent?null:t.$t("联系电话"),T=-1!=t.status||t.inloading||t.isAgent?null:t.$t("请输入手机号"),P=-1!=t.status||t.inloading||t.isAgent?null:t.$t("验证码"),j=-1!=t.status||t.inloading||t.isAgent?null:t.$t("填写验证码"),D=-1!=t.status||t.inloading||t.isAgent?null:t.$t("申请理由"),O=-1!=t.status||t.inloading||t.isAgent?null:t.$t("请输入申请理由"),k=-1!=t.status||t.inloading||t.isAgent?null:t.$t("已阅读并同意"),x=-1!=t.status||t.inloading||t.isAgent?null:t.$t("分销员协议"),C=-1!=t.status||t.inloading||t.isAgent?null:t.$t("提交申请"),S=-1==t.status&&!t.inloading&&t.showProtocol?t.$t(t.isAgent?"代理商入驻协议":"分销说明"):null,I=-1==t.status&&!t.inloading||0!=t.status?null:t.$t("恭喜，您的资料提交成功！"),L=-1==t.status&&!t.inloading||0!=t.status?null:t.$t("返回首页"),V=-1==t.status&&!t.inloading||0==t.status||1!=t.status?null:t.$t("恭喜，您的资料通过审核！"),E=-1==t.status&&!t.inloading||0==t.status||1!=t.status?null:t.$t("返回首页"),H=-1==t.status&&!t.inloading||0==t.status||1==t.status||2!=t.status?null:t.$t("您的申请未通过！"),U=-1==t.status&&!t.inloading||0==t.status||1==t.status||2!=t.status?null:t.$t("重新申请"),G=-1==t.status&&!t.inloading||0==t.status||1==t.status||2!=t.status?null:t.$t("返回首页");t._isMounted||(t.e0=function(i){t.showProtocol=!1}),t.$mp.data=Object.assign({},{$root:{m0:e,m1:n,m2:s,m3:a,m4:o,m5:u,m6:r,m7:l,m8:c,m9:d,m10:h,m11:g,g0:f,m12:m,m13:p,m14:$,m15:v,m16:A,m17:y,m18:b,m19:_,m20:w,m21:T,m22:P,m23:j,m24:D,m25:O,m26:k,m27:x,m28:C,m29:S,m30:I,m31:L,m32:V,m33:E,m34:H,m35:U,m36:G}})},a=[]},"1b7b":function(t,i,e){"use strict";e.r(i);var n=e("c573"),s=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=s.a},"27f4":function(t,i,e){"use strict";e.r(i);var n=e("04fd"),s=e("1b7b");for(var a in s)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(a);e("37b2");var o=e("828b"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"1258650f",null,!1,n["a"],void 0);i["default"]=u.exports},"37b2":function(t,i,e){"use strict";var n=e("45d5"),s=e.n(n);s.a},"45d5":function(t,i,e){},c573:function(t,i,e){"use strict";(function(t){var n=e("47a9");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=n(e("7eb4")),a=n(e("ee10")),o=n(e("7ca3")),u=(e("d7f8"),e("c302")),r=e("a05e"),l=e("8f59"),c=n(e("0cf0")),d=n(e("30ff")),h=e("9ad6");function g(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?g(Object(e),!0).forEach((function(i){(0,o.default)(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var m=getApp(),p={components:{Verify:function(){e.e("pages/annex/components/verify/verify").then(function(){return resolve(e("af98"))}.bind(null,e)).catch(e.oe)},"jyf-parser":function(){Promise.all([e.e("common/vendor"),e.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(e("798d"))}.bind(null,e)).catch(e.oe)},authorize:function(){e.e("components/Authorize").then(function(){return resolve(e("636c"))}.bind(null,e)).catch(e.oe)}},mixins:[d.default,c.default],data:function(){var t;return t={isAgent:!1,inloading:!0,status:-1,isAuto:!1,isShowAuth:!1,text:this.$t("获取验证码"),codeUrl:"",disabled:!1,isAgree:!1,showProtocol:!1,isShowCode:!1,loading:!1,merchantData:{agent_name:"",name:"",phone:"",classification:"",division_invite:""},form:{nickname:"",uid:"",phone:"",code:"",real_name:""},validate:!1,successful:!1,keyCode:"",codeVal:"",protocol:m.globalData.sys_intention_agree,timer:"",index:0,index1:0,mer_classification:"",mer_storeType:"",images:[],tagStyle:{img:"width:100%;display:block;",table:"width:100%",video:"width:100%"},mer_i_id:null,isType:!1,id:0,refusal_reason:""},(0,o.default)(t,"keyCode",""),(0,o.default)(t,"type","agent"),t},beforeDestroy:function(){clearTimeout(this.timer)},computed:f(f({},(0,l.mapGetters)(["isLogin"])),{},{headerBg:function(){return h.HTTP_REQUEST_URL+"/statics/images/".concat(this.isAgent?"agent_apply.jpg":"spread_apply.jpg")}}),onLoad:function(i){var e=this;i.id&&(this.id=id,t.showLoading({title:this.$t("正在加载中")})),this.isLogin?(i.type&&(this.isAgent=!0),this.$nextTick((function(){e.isAgent?e.getHistoryData():e.getInfo()}))):(this.isAuto=!0,this.$set(this,"isShowAuth",!0))},onShow:function(){},methods:{getAgentAgreement:function(){var t=this;this.isAgent?(0,u.getAgentAgreement)().then((function(i){t.isType=!1,t.showProtocol=!0,t.protocol=i.data.content})):(this.isType=!1,this.showProtocol=!0)},code:function(){var t=this.isAgent?this.merchantData.phone:this.form.phone;return t?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(t)?void this.$refs.verify.show():this.$util.Tips({title:this.$t("请输入正确的手机号码")}):this.$util.Tips({title:this.$t("请填写手机号码")})},successVerify:function(t){var i=this;this.$refs.verify.hide(),(0,u.getCodeApi)().then((function(e){i.keyCode=e.data.key,i.getCode(t)})).catch((function(t){i.$util.Tips({title:t})}))},getCode:function(t){var i=this;return(0,a.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i,e.next=3,(0,u.registerVerify)({phone:i.isAgent?n.merchantData.phone:i.form.phone,type:n.type,key:n.keyCode,captchaType:i.captchaType,captchaVerification:t.captchaVerification}).then((function(t){i.sendCode(),n.$util.Tips({title:t.msg})})).catch((function(t){n.$util.Tips({title:t})}));case 3:case"end":return e.stop()}}),e)})))()},getHistoryData:function(){var i=this;(0,u.getHistoryData)().then((function(e){i.status=e.data.status;var n=e.data;if(-1!==e.data.status){var s=Object.keys(i.merchantData);s.map((function(t){i.merchantData[t]=n[t]})),t.hideLoading()}2===i.status&&(i.refusal_reason=n.refusal_reason),i.inloading=!1}))},getCategoryName:function(t,i){for(var e=0;e<i.length;e++)if(i[e].merchant_category_id===t)return i[e]["category_name"]},getPhotoClickIdx:function(t){var i=t.currentTarget.dataset.index;this.imgPreview(this.images,i)},imgPreview:function(i,e){i&&i.length>0&&t.previewImage({current:i[e],urls:i})},onLoadFun:function(){this.isShowAuth=!1},authColse:function(t){this.isShowAuth=t},toggleTab:function(t){this.$refs[t].show()},goHome:function(){t.switchTab({url:"/pages/index/index"})},applyAgain:function(){this.status=-1},uploadpic:function(){var t=this,i=this;i.$util.uploadImageOne("upload/image",(function(e){t.images.push(e.data.url),i.$set(i,"images",i.images)}))},DelPic:function(t){this.images[t];this.images.splice(t,1),this.$set(this,"images",this.images)},getcaptcha:function(){var t=this;(0,r.getCaptcha)().then((function(i){t.codeUrl=i.data.captcha,t.codeVal=i.data.code,t.codeKey=i.data.key})),t.isShowCode=!0},sendCode:function(){var t=this;if(!this.disabled){this.disabled=!0;var i=60;this.text=i+"s";var e=setInterval((function(){i-=1,i<0&&clearInterval(e),t.text=i+"s",t.text<"0s"&&(t.disabled=!1,t.text=t.$t("重新获取"))}),1e3)}},onConfirm:function(t){this.region=t.checkArr[0]+"-"+t.checkArr[1]+"-"+t.checkArr[2]},ChangeIsAgree:function(t){this.isAgree=!this.isAgree,this.validateBtn()},getInfo:function(){var t=this;(0,u.userSpreadInfo)().then((function(i){var e=i.data.user;t.id=e.id||0,t.form.nickname=e.nickname||"",t.form.uid=e.uid||"",t.form.phone=e.phone||"",t.form.real_name=e.real_name||"",t.form.content=e.content||"",t.status=e.status,t.refusal_reason=e.refusal_reason,t.protocol=i.data.agreement.content,t.inloading=!1})).catch((function(i){return t.$util.Tips({title:i})}))},formSpeadSubmit:function(){var t=this;if(!this.isAgree)return that.$util.Tips({title:that.$t("请阅读并同意分销员协议")});(0,u.spreadCreateApi)(this.id,this.form).then((function(i){t.getInfo()})).catch((function(i){return t.$util.Tips({title:i})}))},formSubmit:function(t){var i=this,e=this;if(e.validateForm()&&e.validate){var n={uid:this.$store.state.app.uid,phone:e.merchantData.phone,agent_name:e.merchantData.agent_name,name:e.merchantData.name,code:e.merchantData.code,division_invite:e.merchantData.division_invite,images:e.images,id:this.id};(0,u.create)(n).then((function(t){200==t.status&&(i.timer=setTimeout((function(){e.getHistoryData()}),1e3))})).catch((function(t){e.$util.Tips({title:t})}))}},validateBtn:function(){var t=this.merchantData;t.agent_name&&t.name&&t.phone&&/^1(3|4|5|7|8|9|6)\d{9}$/i.test(t.phone)&&t.code&&this.isAgree&&t.classification&&(this.isShowCode?this.codeVal?this.validate=!0:this.validate=!1:this.validate=!0)},validateForm:function(){var t=this.merchantData;return t.agent_name?t.name?t.phone?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(t.phone)?t.code?this.isShowCode&&!this.codeVal?this.$util.Tips({title:this.$t("请填写图片验证码")}):this.images.length?this.isAgree?(this.validate=!0,!0):this.$util.Tips({title:this.$t("请勾选并同意入驻协议")}):this.$util.Tips({title:this.$t("请上传营业执照")}):this.$util.Tips({title:this.$t("填写验证码")}):this.$util.Tips({title:this.$t("请输入正确的手机号码")}):this.$util.Tips({title:this.$t("请输入手机号")}):this.$util.Tips({title:this.$t("请输入姓名")}):this.$util.Tips({title:this.$t("请输入代理商名称")})},jumpToList:function(){t.navigateTo({url:"/pages/store/applicationRecord/index"})}}};i.default=p}).call(this,e("df3c")["default"])},f6f2:function(t,i,e){"use strict";(function(t,i){var n=e("47a9");e("2ea2");n(e("3240"));var s=n(e("27f4"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(s.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])}},[["f6f2","common/runtime","common/vendor"]]]);