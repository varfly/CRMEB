require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/order_pay_status/components/giftModal"],{"238b":function(t,e,a){"use strict";a.r(e);var n=a("66ab"),i=a("3259");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("2dcc");var s=a("828b"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"19b7cfe5",null,!1,n["a"],void 0);e["default"]=r.exports},"2dcc":function(t,e,a){"use strict";var n=a("e14a"),i=a.n(n);i.a},3259:function(t,e,a){"use strict";a.r(e);var n=a("ffee"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"66ab":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=(t._self._c,t.aleartStatus&&!t.posterImageStatus?t.$t(t.giftData.title):null),n=t.aleartStatus&&!t.posterImageStatus?t.$t("送给好友"):null,i=t.aleartStatus&&!t.posterImageStatus?t.$t("保存海报"):null;t.$mp.data=Object.assign({},{$root:{m0:a,m1:n,m2:i}})},i=[]},e14a:function(t,e,a){},ffee:function(t,e,a){"use strict";(function(t){var n=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("7eb4")),o=n(a("ee10")),s=a("9ad6"),r={data:function(){return{aleartData:{},bag:s.HTTP_REQUEST_URL+"/statics/images/canvas-bag.png",giftBorder:s.HTTP_REQUEST_URL+"/statics/images/gift-border.png",giftbag:s.HTTP_REQUEST_URL+"/statics/images/gift-bag.png",codeShow:!1,cid:"1",codeVal:"",size:200,unit:"upx",background:"#FFF",foreground:"#000",pdground:"#000",codeIcon:"",iconsize:40,lv:3,onval:!0,loadMake:!0,PromotionCode:"",posterImageStatus:!1,posterImage:""}},props:{giftData:{type:Object},aleartStatus:{type:Boolean,default:!1}},watch:{aleartStatus:function(t){t?this.PromotionCode=this.giftData.code:this.aleartData={}}},methods:{copyLink:function(){t.setClipboardData({data:this.codeVal})},qrR:function(t){},posterImageClose:function(){this.posterImageStatus=!1,this.$emit("close",!1)},drawPoster:function(e,a,n){function s(t,e){return t.length>e?t.substring(0,e)+"...":t}var r=t.createCanvasContext("posterCanvas");return new Promise(function(){var c=(0,o.default)(i.default.mark((function o(c,u){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.getImageInfo({src:e[0],success:function(i){r.drawImage(e[0],0,0,375,579),r.save();var o=a;r.setFontSize(14);var f=r.measureText("赠送给好友一份礼物").width,l=r.measureText(o).width,d=32+l+10+f,g=(375-d)/2,h=g+11;r.save(),r.beginPath(),r.arc(h,88,11,0,2*Math.PI),r.clip(),r.drawImage(e[3],g,77,22,22),r.restore(),r.setFontSize(14),r.setTextAlign("left"),r.fillText(o,g+22+10,94),r.setFontSize(14),r.fillText("赠送给好友一份礼物",g+22+10+l+10,94);r.drawImage(e[1],75,130,225,225);r.drawImage(e[2],85,151,205,195);var m=n,p=s(m,20);r.setFontSize(14),r.setTextAlign("center"),r.fillText(p,187.5,381);r.drawImage(e[4],137.5,418,100,100),r.draw(!1,(function(){t.canvasToTempFilePath({canvasId:"posterCanvas",width:375,height:579,success:function(t){c(t.tempFilePath)},fail:function(t){u(t)}})}))}});case 1:case"end":return i.stop()}}),o)})));return function(t,e){return c.apply(this,arguments)}}())},loadImage:function(t){return new Promise((function(e,a){var n=new Image;n.crossOrigin="anonymous",n.src=t,n.onload=function(){e(n)},n.onerror=function(t){return a(t)}}))},share:function(){this.$emit("shareH5")},getPoster:function(){for(var e=this,a=[this.bag,this.giftBorder,this.giftData.image,this.giftData.avatar,this.PromotionCode],n=["","","","",""],i=function(i){t.downloadFile({url:a[i],success:function(t){200==t.statusCode&&(n[i]=t.tempFilePath);var a=n.every((function(t){return""!==t}));a&&e.goPoster(n)},fail:function(){this.$set(this,"PromotionCode","")}})},o=0;o<a.length;o++)i(o)},goPoster:function(t){var e=this;this.drawPoster(t,this.giftData.nickname,this.giftData.title).then((function(t){e.savePosterPathMp(t)})).catch((function(t){}))},savePosterPathMp:function(e){var a=this;t.saveImageToPhotosAlbum({filePath:e,success:function(t){a.$util.Tips({title:a.$t("保存成功"),icon:"success"})},fail:function(t){a.$util.Tips({title:a.$t("保存失败")})}})},savePic:function(t){var e=document.createElement("a");e.download="Gift",e.style.display="none",e.href=t,document.body.appendChild(e),e.click(),e.remove()}}};e.default=r}).call(this,a("df3c")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/goods/order_pay_status/components/giftModal-create-component',
    {
        'pages/goods/order_pay_status/components/giftModal-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("238b"))
        })
    },
    [['pages/goods/order_pay_status/components/giftModal-create-component']]
]);
