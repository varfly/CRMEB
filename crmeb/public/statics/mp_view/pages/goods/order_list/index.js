require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/order_list/index"],{4246:function(t,s,e){"use strict";var _=e("ff86"),i=e.n(_);i.a},"750c":function(t,s,e){"use strict";(function(t,s){var _=e("47a9");e("2ea2");_(e("3240"));var i=_(e("ff3c"));t.__webpack_require_UNI_MP_PLUGIN__=e,s(i.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},"8e89":function(t,s,e){"use strict";e.d(s,"b",(function(){return i})),e.d(s,"c",(function(){return n})),e.d(s,"a",(function(){return _}));var _={easyLoadimage:function(){return e.e("components/easy-loadimage/easy-loadimage").then(e.bind(null,"1bea"))}},i=function(){var t=this,s=t.$createElement,e=(t._self._c,t.$t("订单信息")),_=t.$t("消费订单"),i=t.$t("总消费"),n=t.$t("￥"),a=t.$t("全部"),u=t.$t("待付款"),p=t.$t("待发货"),l=t.$t("待收货"),r=t.$t("待评价"),o=t.$t("共"),c=t.$t("件商品，总金额"),y=t.$t("￥"),d=t.$t("查看详情"),h=t.__map(t.orderList,(function(s,e){var _=t.__get_orig(s),i=2==s.type&&t.$permission("bargain"),n=i?t.$t("砍价"):null,a=i?null:3==s.type&&t.$permission("combination"),u=!i&&a?t.$t("拼团"):null,p=i||a?null:1==s.type&&t.$permission("seckill"),l=i||a||!p?null:t.$t("秒杀"),r=i||a||p||4!=s.type?null:t.$t("预售"),o=1==s.is_cancel?t.$t("已取消"):null,c=1!=s.is_cancel&&9==s._status._type?t.$t("线下付款,未支付"):null,y=1!=s.is_cancel&&9!=s._status._type&&0==s._status._type?t.$t("待付款"):null,d=1!=s.is_cancel&&9!=s._status._type&&0!=s._status._type&&1==s._status._type&&1==s.shipping_type?t.$t("待发货"):null,h=1!=s.is_cancel&&9!=s._status._type&&0!=s._status._type&&1==s._status._type&&1==s.shipping_type?s.refund.length:null,g=1!=s.is_cancel&&9!=s._status._type&&0!=s._status._type&&1==s._status._type&&1==s.shipping_type&&h&&s.is_all_refund?t.$t("退款中"):null,f=1!=s.is_cancel&&9!=s._status._type&&0!=s._status._type&&1==s._status._type&&1==s.shipping_type&&h&&!s.is_all_refund?t.$t("部分退款中"):null,m=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1!=s._status._type||2!=s.shipping_type?null:t.$t("待核销"),$=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1!=s._status._type||2!=s.shipping_type?null:s.refund.length,v=1!=s.is_cancel&&9!=s._status._type&&0!=s._status._type&&(1!=s._status._type||1!=s.shipping_type)&&1==s._status._type&&2==s.shipping_type&&$&&s.is_all_refund?t.$t("退款中"):null,L=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1!=s._status._type||2!=s.shipping_type||!$||s.is_all_refund?null:t.$t("部分退款中"),b=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2!=s._status._type?null:t.$t("待收货"),O=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2!=s._status._type?null:s.refund.length,D=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2!=s._status._type||!O||!s.is_all_refund?null:t.$t("退款中"),I=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2!=s._status._type||!O||s.is_all_refund?null:t.$t("部分退款中"),T=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3!=s._status._type?null:t.$t("待评价"),S=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3!=s._status._type?null:s.refund.length,w=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3!=s._status._type||!S||!s.is_all_refund?null:t.$t("退款中"),x=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3!=s._status._type||!S||s.is_all_refund?null:t.$t("部分退款中"),P=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4!=s._status._type?null:t.$t("已完成"),k=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4!=s._status._type?null:s.refund.length,A=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4!=s._status._type||!k||!s.is_all_refund?null:t.$t("退款中"),C=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4!=s._status._type||!k||s.is_all_refund?null:t.$t("部分退款中"),M=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4==s._status._type||5!=s._status._type||0!=s.status?null:t.$t("未核销"),j=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4==s._status._type||5!=s._status._type||0!=s.status?null:s.refund.length,F=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4==s._status._type||5!=s._status._type||0!=s.status||!j||!s.is_all_refund?null:t.$t("退款中"),z=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4==s._status._type||5!=s._status._type||0!=s.status||!j||s.is_all_refund?null:t.$t("部分退款中"),E=1==s.is_cancel||9==s._status._type||0==s._status._type||1==s._status._type&&1==s.shipping_type||1==s._status._type&&2==s.shipping_type||2==s._status._type||3==s._status._type||4==s._status._type||5==s._status._type&&0==s.status||-2!=s._status._type?null:t.$t("已退款"),G=t.__map(s.cartInfo,(function(e,_){var i=t.__get_orig(e),n=s.gift_uid!==t.uid&&e.productInfo.attrInfo?t.$t("￥"):null,a=s.gift_uid===t.uid||e.productInfo.attrInfo?null:t.$t("￥"),u=e.refund_num&&-2!=s._status._type&&s.gift_uid!==t.uid?t.$t("件退款中"):null;return{$orig:i,m38:n,m39:a,m40:u}})),J=0!=s._status._type&&9!=s._status._type||0!=s.is_cancel?null:t.$t("取消订单"),N=4==s._status._type&&0==s.is_cancel?t.$t("删除订单"):null,U=0==s._status._type&&0==s.is_cancel?t.$t("立即付款"):null;return{$orig:_,m9:i,m10:n,m11:a,m12:u,m13:p,m14:l,m15:r,m16:o,m17:c,m18:y,m19:d,g0:h,m20:g,m21:f,m22:m,g1:$,m23:v,m24:L,m25:b,g2:O,m26:D,m27:I,m28:T,g3:S,m29:w,m30:x,m31:P,g4:k,m32:A,m33:C,m34:M,g5:j,m35:F,m36:z,m37:E,l0:G,m44:J,m45:N,m47:U}})),g=t.orderList.length,f=t.orderList.length,m=0!=f||t.loading?null:t.$t("暂无订单");t.$mp.data=Object.assign({},{$root:{m0:e,m1:_,m2:i,m3:n,m4:a,m5:u,m6:p,m7:l,m8:r,m41:o,m42:c,m43:y,m46:d,l1:h,g6:g,g7:f,m48:m}})},n=[]},b650:function(t,s,e){"use strict";(function(t,_){var i=e("47a9");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=e("1a5b"),a=e("0729"),u=e("d7f8"),p=e("8f59"),l=i(e("0cf0")),r={components:{home:function(){Promise.all([e.e("common/vendor"),e.e("components/home/index")]).then(function(){return resolve(e("05b1"))}.bind(null,e)).catch(e.oe)},emptyPage:function(){e.e("components/emptyPage").then(function(){return resolve(e("04be"))}.bind(null,e)).catch(e.oe)},authorize:function(){e.e("components/Authorize").then(function(){return resolve(e("636c"))}.bind(null,e)).catch(e.oe)}},mixins:[l.default],data:function(){return{loading:!1,loadend:!1,loadTitle:this.$t("加载更多"),orderList:[],orderData:{},orderStatus:9,page:1,limit:20,pay_close:!1,pay_order_id:"",totalPrice:"0",initIn:!1,isAuto:!1,isShowAuth:!1,uid:0}},computed:(0,p.mapGetters)(["isLogin"]),onLoad:function(s){s.status&&(this.orderStatus=s.status);var e=t.getEnterOptionsSync();if("1038"==e.scene&&"wxef277996acc166c3"==e.referrerInfo.appId&&this.initIn){var _=e.referrerInfo.extraData;this.initIn=!1,_?"success"==_.code?this.getOrderList():_.code:this.getOrderList()}},onShow:function(){this.isLogin?(this.page=1,this.orderList=[],this.loadend=!1,this.pay_close=!1,this.onLoadFun(),this.getOrderList(),this.uid=this.$store.state.app.uid):(0,u.toLogin)()},methods:{onLoadFun:function(){this.getOrderData()},authColse:function(t){this.isShowAuth=t},onChangeFun:function(t){var s=t,e=s.action||null,_=void 0!=s.value?s.value:null;e&&this[e]&&this[e](_)},payClose:function(){this.pay_close=!1},getOrderData:function(){var t=this;(0,n.orderData)().then((function(s){t.$set(t,"orderData",s.data)}))},cancelOrder:function(t,s){var e=this;if(!s)return e.$util.Tips({title:e.$t("缺少订单号无法取消订单")});_.showModal({title:this.$t("提示"),content:this.$t("确认取消该订单"),success:function(_){_.confirm?(0,n.orderCancel)(s).then((function(s){return e.$util.Tips({title:s.msg,icon:"success"},(function(){e.orderList.splice(t,1),e.$set(e,"orderList",e.orderList),e.$set(e.orderData,"unpaid_count",e.orderData.unpaid_count-1),e.getOrderData()}))})).catch((function(t){return e.$util.Tips({title:t})})):_.cancel}})},goPay:function(t,s){_.navigateTo({url:"/pages/goods/cashier/index?order_id=".concat(s,"&from_type=order")})},goOrderDetails:function(t){if(!t)return this.$util.Tips({title:this.$t("缺少订单号无法查看订单详情")});_.showLoading({title:this.$t("正在加载中")}),(0,a.openOrderSubscribe)().then((function(){_.hideLoading(),_.navigateTo({url:"/pages/goods/order_details/index?order_id="+t})})).catch((function(t){_.hideLoading()}))},statusClick:function(t){t!=this.orderStatus&&(this.orderStatus=t,this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.getOrderList())},getOrderList:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle=t.$t("加载更多"),(0,n.getOrderList)({type:t.orderStatus,page:t.page,limit:t.limit}).then((function(s){var e=s.data||[],_=e.length<t.limit;t.orderList=t.$util.SplitArray(e,t.orderList),t.$set(t,"orderList",t.orderList),t.loadend=_,t.loading=!1,t.loadTitle=_?t.$t("没有更多内容啦~"):t.$t("加载更多"),t.page=t.page+1})).catch((function(s){t.loading=!1,t.loadTitle=t.$t("加载更多")})))},delOrder:function(t,s){var e=this;_.showModal({title:e.$t("删除订单"),content:e.$t("确定删除该订单"),success:function(_){if(_.confirm)(0,n.orderDel)(t).then((function(t){return e.orderList.splice(s,1),e.$set(e,"orderList",e.orderList),e.$set(e.orderData,"unpaid_count",e.orderData.unpaid_count-1),e.getOrderData(),e.$util.Tips({title:e.$t("删除成功"),icon:"success"})})).catch((function(t){return e.$util.Tips({title:t})}));else if(_.cancel)return e.$util.Tips({title:e.$t("已取消")})}})}},onReachBottom:function(){this.getOrderList()},onPageScroll:function(t){_.$emit("scroll")}};s.default=r}).call(this,e("3223")["default"],e("df3c")["default"])},e4b8:function(t,s,e){"use strict";e.r(s);var _=e("b650"),i=e.n(_);for(var n in _)["default"].indexOf(n)<0&&function(t){e.d(s,t,(function(){return _[t]}))}(n);s["default"]=i.a},ff3c:function(t,s,e){"use strict";e.r(s);var _=e("8e89"),i=e("e4b8");for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(s,t,(function(){return i[t]}))}(n);e("4246");var a=e("828b"),u=Object(a["a"])(i["default"],_["b"],_["c"],!1,null,"d705d30e",null,!1,_["a"],void 0);s["default"]=u.exports},ff86:function(t,s,e){}},[["750c","common/runtime","common/vendor"]]]);