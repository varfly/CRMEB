(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4948a964"],{"13a0":function(t,e,a){a.r(e),a("b0c0");var i=a("2909"),n=a("5530"),o=(a("caad"),a("a15b"),a("14d9"),a("d3b7"),a("6062"),a("3ca3"),a("88e6"),a("70cc"),a("eb03"),a("22e5"),a("c01e"),a("fa76"),a("8306"),a("159b"),a("ddb0"),a("2f62")),s=(a("4e82"),a("498a"),a("99af"),a("a434"),a("c4c8")),l=a("b76a"),r=(l=a.n(l),a("aa47")),c=(l={name:"addAttr",components:{draggable:l.a},data:function(){return{spinShow:!1,modal_loading:!1,grid:{xl:3,lg:3,md:12,sm:24,xs:24},modal:!1,index:1,formDynamic:{id:0,name:"",sort:0,value:[]},attrsName:"",attrsVal:"",formDynamicNameData:[],isBtn:!1,formDynamicName:[],results:[],result:[],ids:0}},watch:{modal:function(t){var e=this;t&&this.$nextTick((function(){e.setSort()}))}},mounted:function(){},methods:{setSort:function(){var t=this,e=this.$refs.selection.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=r.a.create(e,{ghostClass:"sortable-ghost",handle:".handle",setData:function(t){t.setData("Text","")},onEnd:function(e){t.elChangeExForArray(e.oldIndex,e.newIndex,t.formDynamic.value)}})},elChangeExForArray:function(t,e,a,i){var n=this,o=a,s=a[t];a=a[e];i?(o[e]=a,o[t]=s):(o[t]=a,o[e]=s),this.formDynamic.value=[],this.$nextTick((function(t){n.formDynamic.value=o}))},handleShowPop:function(t){this.$refs["inputRef_"+t][0].focus()},handleAddRole:function(){this.formDynamic.value.push({name:"",value:""})},onCancel:function(){this.ids=0,this.clear()},onClose:function(){this.ids=0,this.clear(),this.modal=!1},deleteRow:function(t){this.formDynamic.value.splice(t,1)},addBtn:function(){this.isBtn=!0},onDragDrop:function(t,e){var a;(a=this.formDynamic.value).splice.apply(a,[e,1].concat(Object(i.a)(this.formDynamic.value.splice(t,1,this.formDynamic.value[e]))))},getIofo:function(t){var e=this;this.ids=t.id,Object(s.r)(t.id).then((function(t){e.formDynamic=t.data})).catch((function(t){e.spinShow=!1,e.$message.error(t.msg)}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){return!!t&&(0===e.formDynamic.value.length?e.$message.warning("请至少添加一条商品参数！"):(e.modal_loading=!0,void Object(s.t)(e.formDynamic).then((function(t){e.$message.success(t.msg),setTimeout((function(){e.modal=!1,e.modal_loading=!1}),500),setTimeout((function(){e.$emit("getList"),e.clear()}),600)})).catch((function(t){e.modal_loading=!1,e.$message.error(t.msg)}))))}))},clear:function(){this.$refs.formDynamic.resetFields(),this.formDynamic.value=[],this.formDynamic.name="",this.formDynamic.sort="",this.isBtn=!1,this.attrsName="",this.attrsVal="",this.ids=0},handleRemove:function(t){this.formDynamic.value.splice(t,1)}}},a("5a6f"),a("2877"));l={name:"paramList",components:{paramAdd:Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.spinShow,expression:"spinShow"}],attrs:{visible:t.modal,title:"商品参数",width:"1000px"},on:{"update:visible":function(e){t.modal=e},closed:t.onCancel}},[e("el-form",{ref:"formDynamic",staticClass:"attrFrom",attrs:{model:t.formDynamic,"label-position":"right","label-width":"auto"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:24}},[e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"模板名称：",prop:"rule_name"}},[e("el-input",{attrs:{placeholder:"请输入模板名称",maxlength:20},model:{value:t.formDynamic.name,callback:function(e){t.$set(t.formDynamic,"name","string"==typeof e?e.trim():e)},expression:"formDynamic.name"}})],1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"排序：",prop:"rule_name"}},[e("el-input",{attrs:{type:"number",placeholder:"请输入排序",maxlength:20},model:{value:t.formDynamic.sort,callback:function(e){t.$set(t.formDynamic,"sort","string"==typeof e?e.trim():e)},expression:"formDynamic.sort"}})],1)],1)],1),e("el-col",{key:t.index,staticClass:"noForm",attrs:{span:24}},[e("el-form-item",{attrs:{label:""}},[e("div",{staticClass:"specifications"},[e("el-table",{ref:"selection",attrs:{data:t.formDynamic.value}},[e("el-table-column",{attrs:{width:"50"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"drag",on:{"on-drag-drop":t.onDragDrop}},[e("img",{staticClass:"handle",attrs:{src:a("80cc"),alt:""}})])]}}])}),e("el-table-column",{attrs:{label:"参数名称","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{model:{value:a.row.name,callback:function(e){t.$set(a.row,"name",e)},expression:"scope.row.name"}})]}}])}),e("el-table-column",{attrs:{label:"参数值","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{model:{value:a.row.value,callback:function(e){t.$set(a.row,"value",e)},expression:"scope.row.value"}})]}}])}),e("el-table-column",{attrs:{label:"操作",fixed:"right",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"submission mr15",on:{click:function(e){return t.deleteRow(a.$index)}}},[t._v("删除")])]}}])})],1),t.formDynamic.value.length<8?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"submission mr15 mt20",attrs:{type:"primary"},on:{click:t.handleAddRole}},[t._v("添加参数")]):t._e()],1)])],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:t.onClose}},[t._v("取消")]),e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){return t.handleSubmit("formDynamic")}}},[t._v("确定")])],1)],1)}),[],!1,null,"3fc9c92f",null).exports},data:function(){return{loading:!1,artFrom:{page:1,limit:20,name:""},tableList:[],total:0,selectedIds:new Set,ids:[],multipleSelection:[]}},computed:Object(n.a)({},Object(o.d)("admin/order",["orderChartType"])),created:function(){this.getDataList()},methods:{getRowKey:function(t){return t.id},handleSelectAll:function(t){var e=this;0===t.length?this.$refs.table.data.forEach((function(t){e.selectedIds.has(t.id)&&e.selectedIds.delete(t.id)})):t.forEach((function(t){e.selectedIds.add(t.id)})),this.$nextTick((function(){e.setChecked()}))},handleSelectRow:function(t){for(var e=this,a=[],i=[],n=0;n<t.length;n++){var o=t[n];i.includes(o.id)||(a.push(o),i.push(o.id))}this.selectedIds=i,this.multipleSelection=a,this.$nextTick((function(t){e.setChecked()}))},setChecked:function(){this.ids=Object(i.a)(this.selectedIds).join(",")},del:function(t,e){var a=this;e={title:e,num:0,url:"product/param/del/".concat(t.id),method:"DELETE"};this.$modalSure(e).then((function(t){a.$message.success(t.msg),a.getDataList()})).catch((function(t){a.$message.error(t.msg)}))},paramAdd:function(){this.$refs.paramAdd.modal=!0},edit:function(t){this.$refs.paramAdd.modal=!0,this.$refs.paramAdd.getIofo(t)},getDataList:function(){var t=this;this.loading=!0,Object(s.s)(this.artFrom).then((function(e){var a=e.data;t.tableList=a.list,t.$nextTick((function(){t.setChecked()})),t.total=e.data.count,t.loading=!1})).catch((function(e){t.loading=!1,t.$message.error(e.msg)}))},userSearchs:function(){this.artFrom.page=1,this.getDataList()}}},n=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"ivu-mt",attrs:{bordered:!1,shadow:"never","body-style":{padding:0}}},[e("div",{staticClass:"padding-add"},[e("el-form",{ref:"artFrom",staticClass:"tabform",attrs:{model:t.artFrom,"label-width":"80px","label-position":"right",inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"模板搜索："}},[e("el-input",{staticClass:"form_content_width",attrs:{clearable:"",placeholder:"请输入模板名称"},model:{value:t.artFrom.name,callback:function(e){t.$set(t.artFrom,"name",e)},expression:"artFrom.name"}})],1),e("el-form-item",[e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:t.userSearchs}},[t._v("查询")])],1)],1)],1)]),e("el-card",{staticClass:"ivu-mt mt16",attrs:{bordered:!1,shadow:"never"}},[e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:t.paramAdd}},[t._v("添加商品参数")]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticClass:"mt14",attrs:{data:t.tableList,"highlight-current-row":"","row-key":t.getRowKey,"empty-text":"暂无数据"},on:{"selection-change":t.handleSelectRow}},[e("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.id))])]}}])}),e("el-table-column",{attrs:{label:"模板名称","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{label:"创建时间","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.add_time))])]}}])}),e("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.edit(a.row)}}},[t._v("编辑")]),e("el-divider",{attrs:{direction:"vertical"}}),e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.del(a.row,"删除参数",a.$index)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"acea-row row-right page"},[t.total?e("pagination",{attrs:{total:t.total,page:t.artFrom.page,limit:t.artFrom.limit},on:{"update:page":function(e){return t.$set(t.artFrom,"page",e)},"update:limit":function(e){return t.$set(t.artFrom,"limit",e)},pagination:t.getDataList}}):t._e()],1)],1),e("param-add",{ref:"paramAdd",on:{getList:t.userSearchs}})],1)}),[],!1,null,"d4879544",null);e.default=n.exports},"5a6f":function(t,e,a){a("ccba")},"80cc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAeCAYAAAAhDE4sAAAAAXNSR0IArs4c6QAAAH9JREFUSEtjZGBgYNh/+HQDIyNjPIj9////hY62pg0gNi6ATT0jVLAeWdP///8bcRmGSz3jgSNn7jMwMCig2f7AwcZEEZuLcKmnnkFU8xrVAhtf7JAix0iKYnxqRw0iHJLgMBrNa+CAwplpR/MawYQ0mtcIBhHDaF5DhNHQyWsAiKzwBxioCkgAAAAASUVORK5CYII="},ccba:function(t,e,a){}}]);