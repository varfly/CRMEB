(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5d0c1789"],{"4cfd":function(t,e,i){i.r(e),i("4e82"),i("b0c0");var n=i("c7eb"),a=i("1da1"),l=(i("d81d"),i("a434"),i("d3b7"),i("25f0"),i("90e7")),s={name:"linkLisk",props:{},data:function(){return{dialogVisible:!1,treeData:[],linkList:[],uploadName:{name:"",all:1},treeId:0,fileData:{page:1,limit:15},total:0,pids:0,loading:!1,multipleSelection:[],linkForm:{id:0,name:"",url:"",sort:0,status:1},highlightCurrent:!0}},mounted:function(){this.getList()},methods:{handleClose:function(){this.dialogVisible=!1,this.initData()},onCopy:function(t){var e=this;this.$copyText(t).then((function(t){e.$message.success("复制成功")})).catch((function(t){e.$message.error("复制失败")}))},edit:function(t){this.linkForm.name=t.name,this.linkForm.url=t.url,this.linkForm.sort=t.sort,this.linkForm.status=t.status,this.linkForm.id=t.id,this.dialogVisible=!0},addLinkSubmit:function(){var t=this;this.$refs.linkForm.validate((function(e){if(!e)return!1;e={cate_id:t.treeId,id:t.linkForm.id,name:t.linkForm.name,url:t.linkForm.url,sort:t.linkForm.sort,status:t.linkForm.status},Object(l.U)(e).then((function(e){t.$message.success(e.msg),t.dialogVisible=!1,t.getLinkList()})).catch((function(e){t.$message.error(e)}))}))},clickMenu:function(t,e){1==e?this.editLinkCategory(t,0):2==e?this.editLinkCategory(t,1):3==e&&this.remove(t,"分类")},delImg:function(t){var e=this;this.$modalSure({title:"删除选中图片",url:"file/file/delete",method:"POST",ids:{ids:t}}).then((function(t){e.$message.success(t.msg),e.getLinkList(),e.checkPicList=[]})).catch((function(t){e.$message.error(t.msg)}))},editPicList:function(t){var e=this;t={ids:t||this.ids.toString()};this.$modalSure({title:"删除选中图片",url:"file/file/delete",method:"POST",ids:t}).then((function(t){e.$message.success(t.msg),e.getLinkList(),e.initData()})).catch((function(t){e.$message.error(t.msg)}))},initData:function(){this.fileData.page=1,this.fileData.id="",this.linkForm.name="",this.linkForm.h5_url="",this.linkForm.url=""},onMouseOver:function(t,e,i){event.preventDefault(),i.flag=!i.flag,i.flag2&&(i.flag2=!1)},addLink:function(){this.initData(),this.dialogVisible=!0},appendBtn:function(t,e,i){1!=t.pid||e.expanded?1!=t.pid&&(this.treeId=t.id,this.fileData.page=1,this.getLinkList()):this.highlightCurrent=!1},nodeExpand:function(t,e,i){var n=this;e.expanded&&t.children.length&&(this.highlightCurrent=!0,this.$nextTick((function(){n.fileData.page=1,n.treeId=t.children[0].id||"",n.$refs.tree.setCurrentKey(n.treeId),n.getLinkList()})))},append:function(){this.getFrom()},remove:function(t,e){var i=this;this.tits=e,e={title:"删除 [ "+t.title+" ] 分类",url:"diy/link/category/del/".concat(t.id),method:"DELETE",ids:""};this.$modalSure(e).then((function(t){i.$message.success(t.msg),i.getList(),i.checkPicList=[]})).catch((function(t){i.$message.error(t.msg)}))},editLinkCategory:function(t,e){var i=this;this.$modalForm(Object(l.T)(e?t.id:1,t.pid||1)).then((function(){return i.getList()}))},getList:function(t){var e=this;Object(l.l)(this.uploadName).then((function(t){var i;e.treeId=0<t.data.length?null==(i=t.data[0])||null==(i=i.children[0])?void 0:i.id:"",e.treeData=t.data,e.getLinkList()})).catch((function(t){e.$message.error(t.msg)}))},getLinkList:function(){var t=this;this.fileData.id=this.treeId,this.loading=!0,Object(l.V)(this.fileData).then(function(){var e=Object(a.a)(Object(n.a)().mark((function e(i){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.linkList=i.data.list,t.total=i.data.count,t.loading=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$message.error(e.msg)}))},del:function(t,e,i){var n=this;e={title:e,num:i,url:"diy/link/del/".concat(t.id),method:"DELETE",ids:""};this.$modalSure(e).then((function(t){n.$message.success(t.msg),n.linkList.splice(i,1)})).catch((function(t){n.$message.error(t.msg)}))},addFlag:function(t){var e=this;t.map((function(t){e.$set(t,"flag",!1),e.$set(t,"flag2",!1),t.children&&e.addFlag(t.children)}))},pageChange:function(t){this.fileData.page=t,this.getLinkList(),this.checkPicList=[]},getFrom:function(){var t=this;this.$modalForm(Object(l.T)(0,1)).then((function(e){t.getList()}))}}},o=(i("6bde"),i("2877"));o=Object(o.a)(s,(function(){var t=this,e=t._self._c;return e("el-card",{staticClass:"ivu-mt",attrs:{bordered:!1,shadow:"never"}},[e("div",{staticClass:"Modal"},[e("div",{staticClass:"colLeft"},[e("div",{staticClass:"Nav"},[e("div",{staticClass:"trees-coadd"},[e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"tree_tit",on:{click:t.append}},[e("i",{staticClass:"el-icon-circle-plus"}),t._v("\n            添加分类\n          ")]),e("div",{staticClass:"scollhide"},[t.treeData.length?e("div",{staticClass:"tree"},[e("el-tree",{ref:"tree",attrs:{data:t.treeData,"node-key":"id","default-expand-all":"","highlight-current":t.highlightCurrent,"expand-on-click-node":!0,"check-on-click-node":!1,"current-node-key":t.treeId},on:{"node-click":t.appendBtn,"node-expand":t.nodeExpand},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.data;return e("span",{staticClass:"custom-tree-node"},[e("div",{staticClass:"file-name"},[1==a.pid?e("img",{staticClass:"icon",attrs:{src:i("c583")}}):t._e(),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.title,placement:"top"}},[e("div",{staticClass:"text line1"},[t._v("\n                        "+t._s(a.title)+"\n                      ")])])],1),e("span",[e("el-dropdown",{on:{command:function(e){return t.clickMenu(a,e)}}},[e("i",{staticClass:"el-icon-more el-icon--right"}),e("template",{slot:"dropdown"},[e("el-dropdown-menu",[1==a.pid?e("el-dropdown-item",{attrs:{command:"1"}},[t._v("新增分类")]):t._e(),a.id?e("el-dropdown-item",{attrs:{command:"2"}},[t._v("编辑分类")]):t._e(),a.id?e("el-dropdown-item",{attrs:{command:"3"}},[t._v("删除")]):t._e()],1)],1)],2)],1)])}}],null,!1,1229601975)})],1):t._e()])])]),e("div",{staticClass:"conter"},[e("el-button",{attrs:{type:"primary"},on:{click:t.addLink}},[t._v("添加链接")]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"couponTable",staticClass:"mt20",attrs:{data:t.linkList,"highlight-current-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"}},[e("el-table-column",{attrs:{label:"ID",width:"70"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.id))])]}}])}),e("el-table-column",{attrs:{label:"名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.name))])]}}])}),e("el-table-column",{attrs:{label:"H5链接",minWidth:"170"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{staticClass:"item pointer",attrs:{content:"点击复制"}},[e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.onCopy(i.row.h5_url)}}},[t._v(t._s(i.row.h5_url))])])]}}])}),e("el-table-column",{attrs:{label:"小程序链接",minWidth:"140"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{staticClass:"item pointer",attrs:{content:"点击复制"}},[e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.onCopy(i.row.url)}}},[t._v(t._s(i.row.url))])])]}}])}),e("el-table-column",{attrs:{label:"添加时间",minWidth:"90"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.add_time))])]}}])}),e("el-table-column",{attrs:{label:"操作",fixed:"right",width:"90"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.edit(i.row)}}},[t._v("编辑")]),e("el-divider",{attrs:{direction:"vertical"}}),e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.del(i.row,"删除链接",i.$index)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"acea-row row-right page"},[t.total?e("pagination",{attrs:{total:t.total,page:t.fileData.page,limit:t.fileData.limit},on:{"update:page":function(e){return t.$set(t.fileData,"page",e)},"update:limit":function(e){return t.$set(t.fileData,"limit",e)},pagination:t.getLinkList}}):t._e()],1)],1)])]),e("el-dialog",{attrs:{title:"链接",visible:t.dialogVisible,width:"40%","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"linkForm",attrs:{model:t.linkForm,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"名称:",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.linkForm.name,callback:function(e){t.$set(t.linkForm,"name",e)},expression:"linkForm.name"}})],1),e("el-form-item",{attrs:{label:"跳转链接:",prop:"url"}},[e("el-input",{attrs:{placeholder:"请输入跳转链接"},model:{value:t.linkForm.url,callback:function(e){t.$set(t.linkForm,"url",e)},expression:"linkForm.url"}})],1),e("el-form-item",{attrs:{label:"排序:",prop:"url"}},[e("el-input",{attrs:{placeholder:"请输入排序"},model:{value:t.linkForm.sort,callback:function(e){t.$set(t.linkForm,"sort",e)},expression:"linkForm.sort"}})],1),e("el-form-item",{attrs:{label:"是否开启:",prop:"url"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.linkForm.status,callback:function(e){t.$set(t.linkForm,"status",e)},expression:"linkForm.status"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addLinkSubmit}},[t._v("确 定")])],1)],1)],1)}),[],!1,null,"635b8128",null);e.default=o.exports},"6bde":function(t,e,i){i("d2f2")},d2f2:function(t,e,i){}}]);