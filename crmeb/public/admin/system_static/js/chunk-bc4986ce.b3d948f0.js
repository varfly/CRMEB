(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bc4986ce"],{2097:function(e,t,r){r("fb41")},a402:function(e,t,r){r.r(t),r("b0c0");var a=r("c7eb"),n=r("1da1"),o=r("5530"),i=(r("d9e2"),r("d81d"),r("ac1f"),r("00b4"),r("90e7")),l=r("2f62"),c=r("b0e7"),s=r("b562");c={name:"systemStore",components:{uploadPictures:c.a},data:function(){var e=this;return{spinShow:!1,modalMap:!1,addresData:[],formItem:{name:"",introduction:"",phone:"",address:[],address2:[],detailed_address:"",valid_time:[],day_time:["",""],latlng:"",id:0},ruleValidate:{name:[{required:!0,message:"请输入门店名称",trigger:"blur"}],mail:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],address:[{required:!0,message:"请选择门店地址",type:"array",trigger:"change"}],valid_time:[{required:!0,type:"array",message:"请选择核销时效",trigger:"change",fields:{0:{type:"date",required:!0,message:"请选择年度范围"},1:{type:"date",required:!0,message:"请选择年度范围"}}}],day_time:[{required:!0,type:"array",message:"请选择门店营业时间",trigger:"change"}],phone:[{required:!0,validator:function(e,t,r){if(!t)return r(new Error("请填写手机号"));/^1[3456789]\d{9}$/.test(t)?r():r(new Error("手机号格式不正确!"))},trigger:"blur"}],detailed_address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],image:[{required:!0,validator:function(t,r,a){e.formItem.image?a():a(new Error("请上传门店logo"))},trigger:"change"}],latlng:[{required:!0,message:"请选择经纬度",trigger:"blur"}]},keyUrl:"",grid:{xl:10,lg:16,md:18,sm:24,xs:24},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},modalPic:!1,isChoice:"单选"}},created:function(){this.getCityList(),this.getKey(),this.getFrom()},computed:Object(o.a)(Object(o.a)({},Object(l.d)("media",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:"80px"},labelPosition:function(){return this.isMobile?"top":"right"}}),mounted:function(){window.addEventListener("message",(function(e){e=e.data,e&&"locationPicker"===e.module&&window.parent.selectAdderss(e)}),!1),window.selectAdderss=this.selectAdderss},methods:{getCityList:function(){var e=this;Object(s.b)().then((function(t){t.data.map((function(e){e.value=e.label,e.children&&e.children.length&&e.children.map((function(e){e.value=e.label,e.children&&e.children.length&&e.children.map((function(e){e.value=e.label}))}))})),e.addresData=t.data}))},selectAdderss:function(e){this.formItem.latlng=e.latlng.lat+","+e.latlng.lng,this.modalMap=!1},getKey:function(){var e=this;Object(i.J)().then(function(){var t=Object(n.a)(Object(a.a)().mark((function t(r){var n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.data.key,e.keyUrl="https://apis.map.qq.com/tools/locpicker?type=1&key=".concat(n,"&referer=myapp");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$message.error(t.msg)}))},getFrom:function(){var e=this;this.spinShow=!0,Object(i.Qb)().then(function(){var t=Object(n.a)(Object(a.a)().mark((function t(r){var n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.data.info||null,e.formItem=n||e.formItem,e.formItem.address=n.address2,e.spinShow=!1;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.spinShow=!1,e.$message.error(t.msg)}))},modalPicTap:function(){this.modalPic=!0},getPic:function(e){this.formItem.image=e.att_dir,this.modalPic=!1},handleChange:function(e,t){this.formItem.address=t.map((function(e){return e.label}))},onchangeDate:function(e){this.formItem.valid_time=e},onchangeTime:function(e){this.formItem.day_time=e},onSearch:function(){this.modalMap=!0},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(i.Pb)(t.formItem).then(function(){var e=Object(n.a)(Object(a.a)().mark((function e(r){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$message.success(r.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg)}))}))}}},r("2097"),o=r("2877"),l=Object(o.a)(c,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.spinShow,expression:"spinShow"}],staticClass:"article-manager"},[t("el-card",{staticClass:"ivu-mt",attrs:{bordered:!1,shadow:"never"}},[t("el-form",{ref:"formItem",attrs:{model:e.formItem,"label-width":e.labelWidth,"label-position":e.labelPosition,rules:e.ruleValidate},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"门店名称：",prop:"name","label-for":"name"}},[t("el-input",{attrs:{placeholder:"请输入门店名称"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"门店简介：","label-for":"introduction"}},[t("el-input",{attrs:{placeholder:"请输入门店简介"},model:{value:e.formItem.introduction,callback:function(t){e.$set(e.formItem,"introduction",t)},expression:"formItem.introduction"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"门店手机号：","label-for":"phone",prop:"phone"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入门店手机号"},model:{value:e.formItem.phone,callback:function(t){e.$set(e.formItem,"phone",t)},expression:"formItem.phone"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"门店地址：","label-for":"address",prop:"address"}},[t("el-cascader",{attrs:{options:e.addresData,value:e.formItem.address},on:{change:e.handleChange},model:{value:e.formItem.address,callback:function(t){e.$set(e.formItem,"address",t)},expression:"formItem.address"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"详细地址：","label-for":"detailed_address",prop:"detailed_address"}},[t("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.formItem.detailed_address,callback:function(t){e.$set(e.formItem,"detailed_address",t)},expression:"formItem.detailed_address"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"核销时效：","label-for":"valid_time"}},[t("el-date-picker",{attrs:{clearable:"",editable:!1,format:"yyyy/MM/dd",type:"daterange","value-format":"yyyy/MM/dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.onchangeDate},model:{value:e.formItem.valid_time,callback:function(t){e.$set(e.formItem,"valid_time",t)},expression:"formItem.valid_time"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"门店营业：","label-for":"day_time"}},[t("el-time-picker",{attrs:{format:"HH:mm:ss","value-format":"HH:mm:ss","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:e.onchangeTime},model:{value:e.formItem.day_time,callback:function(t){e.$set(e.formItem,"day_time",t)},expression:"formItem.day_time"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"门店logo：",prop:"image"}},[t("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"picBox",on:{click:function(t){return e.modalPicTap("单选")}}},[e.formItem.image?t("div",{staticClass:"pictrue"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formItem.image,expression:"formItem.image"}]})]):t("div",{staticClass:"upLoad acea-row row-center-wrapper"},[t("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])])],1)],1),t("el-col",{attrs:{span:24}},[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-form-item",{attrs:{label:"经纬度：","label-for":"status2",prop:"latlng"}},[t("el-tooltip",[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请查找位置"},model:{value:e.formItem.latlng,callback:function(t){e.$set(e.formItem,"latlng",t)},expression:"formItem.latlng"}},[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{slot:"append",type:"primary"},on:{click:e.onSearch},slot:"append"},[e._v("查找位置")])],1),t("div",{attrs:{slot:"content"},slot:"content"},[e._v("请点击查找位置选择位置")])],1)],1)],1)],1)],1),t("el-row",[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"ml20",attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formItem")}}},[e._v("提交")])],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.modalPic,width:"1024px",title:"上传商品图","close-on-click-modal":!1,"show-close":!0},on:{"update:visible":function(t){e.modalPic=t}}},[e.modalPic?t("uploadPictures",{attrs:{isChoice:e.isChoice,gridBtn:e.gridBtn,gridPic:e.gridPic},on:{getPic:e.getPic}}):e._e()],1),t("el-dialog",{staticClass:"mapBox",attrs:{visible:e.modalMap,title:"上传商品图","show-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.modalMap=t}}},[t("iframe",{attrs:{id:"mapPage",width:"100%",height:"100%",frameborder:"0",src:e.keyUrl}})])],1)}),[],!1,null,"6d9b2aa2",null);t.default=l.exports},b562:function(e,t,r){r.d(t,"n",(function(){return n})),r.d(t,"w",(function(){return o})),r.d(t,"s",(function(){return i})),r.d(t,"a",(function(){return l})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return s})),r.d(t,"k",(function(){return d})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return p})),r.d(t,"t",(function(){return f})),r.d(t,"v",(function(){return h})),r.d(t,"u",(function(){return b})),r.d(t,"z",(function(){return g})),r.d(t,"x",(function(){return v})),r.d(t,"y",(function(){return w})),r.d(t,"r",(function(){return y})),r.d(t,"p",(function(){return O})),r.d(t,"q",(function(){return _})),r.d(t,"o",(function(){return j})),r.d(t,"c",(function(){return I})),r.d(t,"b",(function(){return k})),r.d(t,"e",(function(){return x})),r.d(t,"d",(function(){return P})),r.d(t,"m",(function(){return T})),r.d(t,"l",(function(){return E})),r("99af");var a=r("6b6c");function n(){return Object(a.a)({url:"app/routine/syncSubscribe",method:"GET"})}function o(){return Object(a.a)({url:"app/wechat/syncSubscribe",method:"GET"})}function i(e){return Object(a.a)({url:"app/wechat/menu",method:"get"})}function l(e){return Object(a.a)({url:"app/wechat/menu",method:"post",data:e})}function c(e){return Object(a.a)({url:e.url,method:"post",data:e.key})}function s(e){return Object(a.a)({url:"app/routine/download",method:"post",data:e})}function d(){return Object(a.a)({url:"app/routine/info",method:"get"})}function u(e){return Object(a.a)({url:"app/wechat/keyword",method:"get",params:e})}function m(e){return Object(a.a)({url:"app/wechat/keyword/set_status/".concat(e.id,"/").concat(e.status),method:"PUT"})}function p(e,t){return Object(a.a)({url:e,method:"get",params:t.key})}function f(e){return Object(a.a)({url:"/app/wechat/news",method:"POST",data:e})}function h(e){return Object(a.a)({url:"app/wechat/news",method:"GET",params:e})}function b(e){return Object(a.a)({url:"app/wechat/news/".concat(e),method:"GET"})}function g(){return Object(a.a)({url:"app/wechat/tag",method:"GET"})}function v(){return Object(a.a)({url:"app/wechat/tag/create",method:"GET"})}function w(e){return Object(a.a)({url:"app/wechat/tag/".concat(e,"/edit"),method:"GET"})}function y(){return Object(a.a)({url:"app/wechat/group",method:"GET"})}function O(){return Object(a.a)({url:"app/wechat/group/create",method:"GET"})}function _(e){return Object(a.a)({url:"app/wechat/group/".concat(e,"/edit"),method:"GET"})}function j(e){return Object(a.a)({url:"app/wechat/action",method:"GET",params:e})}function I(e){return Object(a.a)({url:"app/wechat/code_reply/".concat(e),method:"GET"})}function k(){return Object(a.a)({url:"setting/city/full_list",method:"GET"})}function x(e){return Object(a.a)({url:"app/kefu/auto_reply/list",method:"get",params:e})}function P(e){return Object(a.a)({url:"app/kefu/auto_reply/form/"+e,method:"get"})}function T(e){return Object(a.a)({url:"app/routine/scheme_list",method:"get",params:e})}function E(e){return Object(a.a)({url:"app/routine/scheme_form/".concat(e),method:"get"})}},fb41:function(e,t,r){}}]);