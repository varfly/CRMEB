(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cd5e0b88"],{"129f":function(e,t,i){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},"2eed":function(e,t,i){i.r(t),i("b0c0"),i("ac1f"),i("841c");var a=i("c7eb"),r=i("1da1"),n=i("5530"),s=(i("d81d"),i("14d9"),i("5319"),i("2f62")),o=i("6b6c");function l(e){return Object(o.a)({url:e,method:"get"})}n={name:"crud_index",data:function(){return{grid:{xl:7,lg:7,md:12,sm:24,xs:24},loading:!1,columns:[],readFields:{name:"",all:[]},from:{page:1,limit:15},dataList:[],total:0,methodApi:{},curdKey:"",dialogTableVisible:!1,info:{},search:[]}},computed:Object(n.a)(Object(n.a)({},Object(s.d)("media",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:"80px"},labelPosition:function(){return this.isMobile?"top":"right"}}),beforeRouteUpdate:function(e,t,i){this.from.page=1,this.getCrudApi(e.params.table_name),i()},created:function(){this.getCrudApi(this.$route.params.table_name)},methods:{show:function(e){var t=this;l(this.methodApi.read.replace("<id>",e.id)).then((function(e){t.dialogTableVisible=!0,t.info=e.data})).catch((function(e){t.$Message.error(e.msg)}))},onchangeIsShow:function(e,t){var i=this,n=this.methodApi.status.replace("<id>",e.id);n=n,e={field:t,value:e[t]},Object(o.a)({url:n,method:"put",data:e}).then(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.$message.success(t.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.$message.error(e.msg)}))},searchs:function(){this.from.page=1,this.getList()},change:function(e){this.$forceUpdate()},getCrudApi:function(e){var t=this;e=e,Object(o.a)({url:"system/crud/config/".concat(e),method:"get"}).then((function(e){t.methodApi=e.data.route,t.curdKey=e.data.key,t.readFields=e.data.readFields,e.data.search.map((function(e){t.from[e.field]=""})),t.search=e.data.search,e.data.columns.push({title:"操作",slot:"action",fixed:"right",width:100,align:"center"}),e.data.columns.map((function(e){"frameImageOne"===e.from_type?e.render=function(t,i){return t("div",{class:"tabBox_img",directives:[{name:"viewer"}]},[t("img",{directives:[{name:"lazy",value:i.row[e.slot]}]})])}:"frameImages"===e.from_type&&(e.render=function(t,i){i=i.row[e.slot]||[];var a=[];return i.map((function(e){a.push(t("img",{directives:[{name:"lazy",value:e}]}))})),t("div",{class:"tabBox_img",directives:[{name:"viewer"}]},a)})})),t.columns=e.data.columns,t.getList()}))},add:function(){var e=this,t=this.methodApi.create;this.$modalForm(l(t)).then((function(){return e.getList()}))},getList:function(){var e,t=this,i=(this.loading=!0,this.methodApi.index);i=i,e=this.from,Object(o.a)({url:i,method:"get",params:e}).then(function(){var e=Object(r.a)(Object(a.a)().mark((function e(i){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=i.data,t.dataList=r.list,t.total=r.count,t.loading=!1;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$message.error(e.msg)}))},edit:function(e){var t=this;e=this.methodApi.edit.replace("<id>",e[this.curdKey]);this.$modalForm((e=e,Object(o.a)({url:e,method:"get"}))).then((function(){return t.getList()}))},del:function(e,t,i){var a=this;e=this.methodApi.delete.replace("<id>",e[this.curdKey]);this.$modalSure({title:t,num:i,url:e,method:"DELETE",ids:""}).then((function(e){a.$message.success(e.msg),a.getList()})).catch((function(e){a.$message.error(e.msg)}))}}},i("7556"),s=i("2877"),i=Object(s.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"ivu-mt",attrs:{shadow:"never","body-style":{padding:0}}},[t("div",{staticClass:"padding-add"},[e.search.length?t("el-form",{ref:"curlFrom",attrs:{model:e.from,"label-width":e.labelWidth,"label-position":e.labelPosition,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.search,(function(i,a){return t("el-form-item",{key:a,attrs:{label:i.name+":"}},["input"===i.type?t("el-input",{staticClass:"form_content_width",attrs:{placeholder:"请输入"+i.name},on:{input:function(t){return e.change(t)}},model:{value:e.from[i.field],callback:function(t){e.$set(e.from,i.field,t)},expression:"from[item.field]"}}):"date-picker"===i.type?t("el-date-picker",{staticStyle:{width:"250px"},attrs:{editable:!1,clearabl:"",format:"yyyy/MM/dd",type:"daterange","value-format":"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.searchs},model:{value:e.from[i.field],callback:function(t){e.$set(e.from,i.field,t)},expression:"from[item.field]"}}):"select"===i.type?t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择",clearable:""},on:{change:e.searchs},model:{value:e.from[i.field],callback:function(t){e.$set(e.from,i.field,t)},expression:"from[item.field]"}},e._l(i.option,(function(e,i){return t("el-option",{key:i,attrs:{value:e.value,label:e.label}})})),1):e._e()],1)})),t("el-form-item",[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:e.searchs}},[e._v("查询")])],1)],2):e._e()],1)]),t("el-card",{staticClass:"ivu-mt",class:e.search.length?"mt16":"",attrs:{shadow:"never"}},[t("el-row",[t("el-col",e._b({},"el-col",e.grid,!1),[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticClass:"mt14",attrs:{data:e.dataList,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"}},e._l(e.columns,(function(i,a){return t("el-table-column",{key:a,attrs:{label:i.title,"min-width":i.minWidth},scopedSlots:e._u([{key:"default",fn:function(a){return[i.key?[t("span",[e._v(e._s(a.row[i.key]))])]:"frameImageOne"==i.from_type?[t("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.row[i.slot],expression:"scope.row[item.slot]"}]})])]:"frameImages"==i.from_type?[t("div",{staticClass:"frame-images"},e._l(a.row[i.slot],(function(e,i){return t("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:i,staticClass:"tabBox_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}]})])})),0)]:"dateTimeRange"==i.from_type?[t("span",[e._v(e._s(a.row[i.slot][0])+"--"+e._s(a.row[i.slot][1]))])]:"action"===i.slot?[t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){return e.show(a.row)}}},[e._v("详情")]),t("el-divider",{attrs:{direction:"vertical"}}),t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){return e.edit(a.row)}}},[e._v("修改")]),t("el-divider",{attrs:{direction:"vertical"}}),t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){return e.del(a.row,"删除",a.$index)}}},[e._v("删除")])]:"switches"===i.from_type?[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,value:a.row[i.slot],size:"large"},on:{change:function(t){return e.onchangeIsShow(a.row,i.slot)}},model:{value:a.row[i.slot],callback:function(t){e.$set(a.row,i.slot,t)},expression:"scope.row[item.slot]"}})]:e._e()]}}],null,!0)})})),1),t("div",{staticClass:"acea-row row-right page"},[e.total?t("pagination",{attrs:{total:e.total,page:e.from.page,limit:e.from.limit},on:{"update:page":function(t){return e.$set(e.from,"page",t)},"update:limit":function(t){return e.$set(e.from,"limit",t)},pagination:e.getList}}):e._e()],1)],1),e.dialogTableVisible?t("el-dialog",{attrs:{title:"查看详情",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[t("el-descriptions",{attrs:{title:e.readFields.name}},e._l(e.readFields.all,(function(i,a){return t("el-descriptions-item",{key:a,attrs:{label:i.comment}},[t("div","frameImageOne"==i.from_type?[t("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.info[i.field],expression:"info[item.field]"}]})])]:"frameImages"==i.from_type?[t("div",{staticClass:"frame-images"},e._l(e.info[i.field],(function(e,i){return t("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:i,staticClass:"tabBox_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}]})])})),0)]:"dateTimeRange"==i.from_type?[t("span",[e._v(e._s(e.info[i.field][0])+"--"+e._s(e.info[i.field][1]))])]:[e._v(e._s(e.info[i.field]))])])})),1)],1):e._e()],1)}),[],!1,null,"7e7027f2",null),t.default=i.exports},"38fe":function(e,t,i){},7556:function(e,t,i){i("38fe")},"841c":function(e,t,i){var a=i("c65b"),r=i("d784"),n=i("825a"),s=i("7234"),o=i("1d80"),l=i("129f"),c=i("577e"),d=i("dc4a"),m=i("14c3");r("search",(function(e,t,i){return[function(t){var i=o(this),r=s(t)?void 0:d(t,e);return r?a(r,t,i):new RegExp(t)[e](c(i))},function(e){var a=n(this),r=(e=c(e),i(t,a,e));return r.done?r.value:(r=a.lastIndex,l(r,0)||(a.lastIndex=0),e=m(a,e),l(a.lastIndex,r)||(a.lastIndex=r),null===e?-1:e.index)}]}))}}]);