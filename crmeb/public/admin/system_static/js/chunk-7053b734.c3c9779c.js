(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7053b734","chunk-1835ef2f"],{"05cf":function(e,t,a){},"08ea":function(e,t,a){a.r(t),a("b0c0"),a("d3b7"),a("25f0");var r=a("2909"),s=a("ade3"),i=a("c7eb"),n=a("1da1"),l=a("5530"),o=(a("99af"),a("c740"),a("a15b"),a("d81d"),a("14d9"),a("a434"),a("e9c4"),a("b64b"),a("6062"),a("3ca3"),a("88e6"),a("70cc"),a("eb03"),a("22e5"),a("c01e"),a("fa76"),a("8306"),a("ddb0"),a("232f")),c=a("2f62"),u=a("61f7"),d={name:"table-expand",filters:{formatDate:function(e){if(0!==e)return e=new Date(1e3*e),Object(u.a)(e,"yyyy-MM-dd hh:mm")}},props:{row:Object}},m=(a("7c0b"),a("2877")),p=(d=Object(m.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("el-row",{staticClass:"expand-row"},[t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("首次访问：")]),t("span",{staticClass:"expand-value"},[e._v(" "+e._s(e._f("formatDate")(e.row.add_time)))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("近次访问：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e._f("formatDate")(e.row.last_time)))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("身份证号：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.card_id))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("真实姓名：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.real_name))])])],1),t("el-row",{staticClass:"expand-row"},[t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("标签：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.labels))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("生日：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.birthday))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("推荐人：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.spread_uid_nickname))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("地址：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.addres))])])],1),t("el-row",{staticClass:"expand-row"},[t("el-col",{attrs:{span:6}},[t("span",{staticClass:"expand-key"},[e._v("备注：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.mark))])])],1)],1)}),[],!1,null,"47861808",null).exports,a("498a"),a("4de4"),a("c24f")),f={name:"userEdit",components:{userLabel:o.a},props:{userData:{type:Object,default:function(){}}},watch:{},data:function(){return{modals:!1,labelShow:!1,formItem:{uid:0,real_name:"",phone:"",birthday:"",card_id:"",addres:"",mark:"",pwd:"",true_pwd:"",level:"",group_id:"",label_id:[],spread_open:1,is_promoter:0,status:1},groupInfo:[],labelInfo:[],levelInfo:[],infoData:{groupInfo:[],labelInfo:[],levelInfo:[]},ruleValidate:{real_name:[{required:!0,message:" ",trigger:"blur"}],phone:[{required:!0,message:" ",trigger:"blur"}],pwd:[{required:!0,message:" ",trigger:"blur"}],true_pwd:[{required:!0,message:" ",trigger:"blur"}]},dataLabel:[]}},mounted:function(){var e=this,t=(this.$set(this.infoData,"groupInfo",this.userData.groupInfo),this.$set(this.infoData,"levelInfo",this.userData.levelInfo),this.$set(this.infoData,"labelInfo",this.userData.labelInfo),Object.keys(this.formItem));this.userData.userInfo?(t.map((function(t){e.formItem[t]=e.userData.userInfo[t]})),this.formItem.birthday||(this.formItem.birthday=""),this.formItem.label_id.length&&(this.dataLabel=this.formItem.label_id)):this.reset()},methods:{addLabel:function(){this.$modalForm(Object(p.M)(0)).then((function(){}))},changeModal:function(e){e||(this.cancel(),this.reset())},openLabel:function(e){this.labelShow=!0,this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.infoData.labelInfo)))},cancel:function(){},activeData:function(e){this.labelShow=!1,this.dataLabel=e},labelClose:function(){this.labelShow=!1},closeLabel:function(e){var t=this.dataLabel.indexOf(this.dataLabel.filter((function(t){return t.id==e.id}))[0]);this.dataLabel.splice(t,1)},reset:function(){this.formItem={uid:"",real_name:"",phone:"",birthday:"",card_id:"",addres:"",mark:"",pwd:"",true_pwd:"",level:"",group_id:"",label_id:[],spread_open:1,is_promoter:0,status:1}}}},h=(f=(a("a93a"),Object(m.a)(f,(function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formItem",attrs:{rules:e.ruleValidate,model:e.formItem,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[e.formItem.uid?t("el-form-item",{attrs:{label:"用户ID："}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{disabled:"",placeholder:"请输入编号"},model:{value:e.formItem.uid,callback:function(t){e.$set(e.formItem,"uid",t)},expression:"formItem.uid"}})],1):e._e(),t("el-form-item",{attrs:{label:"真实姓名：",prop:"real_name"}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入真实姓名"},model:{value:e.formItem.real_name,callback:function(t){e.$set(e.formItem,"real_name","string"==typeof t?t.trim():t)},expression:"formItem.real_name"}})],1),t("el-form-item",{attrs:{label:"手机号码：",prop:"phone"}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入手机号码"},model:{value:e.formItem.phone,callback:function(t){e.$set(e.formItem,"phone",t)},expression:"formItem.phone"}})],1),t("el-form-item",{attrs:{label:"生日："}},[t("el-date-picker",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{clearable:"",type:"date",placeholder:"请选择生日",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.formItem.birthday,callback:function(t){e.$set(e.formItem,"birthday",t)},expression:"formItem.birthday"}})],1),t("el-form-item",{attrs:{label:"身份证号："}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入身份证号"},model:{value:e.formItem.card_id,callback:function(t){e.$set(e.formItem,"card_id","string"==typeof t?t.trim():t)},expression:"formItem.card_id"}})],1),t("el-form-item",{attrs:{label:"用户地址："}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入用户地址"},model:{value:e.formItem.addres,callback:function(t){e.$set(e.formItem,"addres",t)},expression:"formItem.addres"}})],1),t("el-form-item",{attrs:{label:"用户备注："}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入用户备注"},model:{value:e.formItem.mark,callback:function(t){e.$set(e.formItem,"mark",t)},expression:"formItem.mark"}})],1),t("el-form-item",{attrs:{label:"登录密码：",prop:"pwd"}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{type:"password",placeholder:"请输入登录密码（修改用户可不填写，不填写不修改原密码）"},model:{value:e.formItem.pwd,callback:function(t){e.$set(e.formItem,"pwd",t)},expression:"formItem.pwd"}})],1),t("el-form-item",{attrs:{label:"确认密码：",prop:"true_pwd"}},[t("el-input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{type:"password",placeholder:"请输入确认密码（修改用户可不填写，不填写不修改原密码）"},model:{value:e.formItem.true_pwd,callback:function(t){e.$set(e.formItem,"true_pwd",t)},expression:"formItem.true_pwd"}})],1),t("el-form-item",{attrs:{label:"用户等级："}},[t("el-select",{staticClass:"form-sty",attrs:{clearable:""},model:{value:e.formItem.level,callback:function(t){e.$set(e.formItem,"level",t)},expression:"formItem.level"}},e._l(e.infoData.levelInfo,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.name}})})),1)],1),t("el-form-item",{attrs:{label:"用户分组："}},[t("el-select",{staticClass:"form-sty",attrs:{clearable:""},model:{value:e.formItem.group_id,callback:function(t){e.$set(e.formItem,"group_id",t)},expression:"formItem.group_id"}},e._l(e.infoData.groupInfo,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.group_name}})})),1)],1),t("el-form-item",{attrs:{label:"用户标签："}},[t("div",{staticStyle:{display:"flex"}},[t("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"labelInput acea-row row-between-wrapper",on:{click:e.openLabel}},[t("div",{staticStyle:{width:"90%"}},[e.dataLabel.length?t("div",e._l(e.dataLabel,(function(a,r){return t("el-tag",{key:r,staticClass:"mr10",attrs:{closable:""},on:{close:function(t){return e.closeLabel(a)}}},[e._v(e._s(a.label_name))])})),1):t("span",{staticClass:"span"},[e._v("选择用户关联标签")])]),t("div",{staticClass:"ivu-icon ivu-icon-ios-arrow-down"})]),t("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"addfont",on:{click:e.addLabel}},[e._v("新增标签")])])]),t("el-form-item",{attrs:{label:"分销禁用："}},[t("el-radio-group",{staticClass:"form-sty",model:{value:e.formItem.spread_open,callback:function(t){e.$set(e.formItem,"spread_open",t)},expression:"formItem.spread_open"}},[t("el-radio",{attrs:{label:0}},[e._v("是")]),t("el-radio",{attrs:{label:1}},[e._v("否")])],1),t("div",{staticClass:"tip"},[e._v("禁用用户的分销资格后，在任何分销模式下该用户都无分销权限")])],1),1==e.formItem.spread_open?t("el-form-item",{attrs:{label:"分销权限："}},[t("el-radio-group",{staticClass:"form-sty",model:{value:e.formItem.is_promoter,callback:function(t){e.$set(e.formItem,"is_promoter",t)},expression:"formItem.is_promoter"}},[t("el-radio",{attrs:{label:1}},[e._v("开启")]),t("el-radio",{attrs:{label:0}},[e._v("关闭")])],1),t("div",{staticClass:"tip"},[e._v("手动开启或关闭用户的分销权限")])],1):e._e(),t("el-form-item",{attrs:{label:"用户状态："}},[t("el-radio-group",{staticClass:"form-sty",model:{value:e.formItem.status,callback:function(t){e.$set(e.formItem,"status",t)},expression:"formItem.status"}},[t("el-radio",{attrs:{label:1}},[e._v("开启")]),t("el-radio",{attrs:{label:0}},[e._v("锁定")])],1)],1)],1),t("el-dialog",{attrs:{visible:e.labelShow,scrollable:"",title:"请选择用户标签",modal:!1,"show-close":!0,width:"540px"},on:{"update:visible":function(t){e.labelShow=t}}},[e.labelShow?t("userLabel",{attrs:{only_get:!0,uid:e.formItem.uid},on:{close:e.labelClose,activeData:e.activeData}}):e._e()],1)],1)}),[],!1,null,"18c5d044",null).exports),a("bbbc")),b=a("3f2a"),_=a("31b4"),v={name:"send",props:{userIds:{type:String,default:""}},data:function(){return{modals:!1,loading:!1,couponList:[],page:{page:1,limit:15,coupon_title:"",receive_type:3},total:0}},methods:{getList:function(e){var t=this;this.loading=!0,Object(p.c)(this.page).then(function(){var e=Object(n.a)(Object(i.a)().mark((function e(a){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===a.status?(r=a.data,t.couponList=r.list,t.total=r.count,t.loading=!1):(t.loading=!1,t.$message.error(a.msg));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$message.error(e.msg)}))},userSearchs:function(){this.getList()},sendGrant:function(e,t,a){var r=this;t={title:t,num:a,url:"marketing/coupon/user/grant",method:"post",ids:{id:e.id,uid:this.userIds}};this.$modalSure(t).then((function(e){r.$message.success(e.msg)})).catch((function(e){r.$message.error(e.msg)}))}}},g=(v=(a("1efc"),Object(m.a)(v,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{visible:e.modals,"z-index":100,title:"发送优惠券","close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){e.modals=t}}},[t("div",{staticClass:"acea-row"},[t("span",{staticClass:"sp"},[e._v("优惠券名称：")]),t("el-input",{staticClass:"form_content_width",attrs:{clearable:"",placeholder:"请输入优惠券名称"},model:{value:e.page.coupon_title,callback:function(t){e.$set(e.page,"coupon_title",t)},expression:"page.coupon_title"}}),t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"ml15",attrs:{type:"primary"},on:{click:e.userSearchs}},[e._v("查询")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticClass:"mt14",attrs:{data:e.couponList,"highlight-current-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"}},[t("el-table-column",{attrs:{label:"优惠券名称","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.title))])]}}])}),t("el-table-column",{attrs:{label:"优惠券面值","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.coupon_price))])]}}])}),t("el-table-column",{attrs:{label:"优惠券最低消费","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.use_min_price))])]}}])}),t("el-table-column",{attrs:{label:"优惠券有效期限","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.coupon_time?t("div",[e._v(e._s(a.row.coupon_time))]):t("div",[e._v(e._s(a.row.use_time))])]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){return e.sendGrant(a.row,"发送优惠券",e.index)}}},[e._v("发送")])]}}])})],1),t("div",{staticClass:"acea-row row-right page"},[e.total?t("pagination",{attrs:{total:e.total,page:e.page.page,limit:e.page.limit},on:{"update:page":function(t){return e.$set(e.page,"page",t)},"update:limit":function(t){return e.$set(e.page,"limit",t)},pagination:e.getList}}):e._e()],1)],1)],1)}),[],!1,null,"0400eefa",null).exports),a("a716")),w=a("c42b"),y=a("8c03"),k=a("b562");d={name:"user_list",components:{expandRow:d,editFrom:_.a,sendFrom:v,userDetails:g.a,newsCategory:w.a,customerInfo:y.default,userLabel:o.a,userEdit:f},data:function(){return{dataLabel:[],selectDataLabel:[],userData:{},modals:!1,selectLabelShow:!1,labelShow:!1,customerShow:!1,promoterShow:!1,labelActive:{uid:0},formInline:{uid:0,spread_uid:0,image:""},pickerOptions:this.$timeOptions,collapse:!1,headeNum:[{type:"",name:"全部"},{type:"wechat",name:"微信公众号"},{type:"routine",name:"微信小程序"},{type:"h5",name:"H5"},{type:"pc",name:"PC"},{type:"app",name:"APP"}],address:[],addresData:[],isShowSend:!0,modal13:!1,maxCols:4,scrollerHeight:"600",contentTop:"130",contentWidth:"98%",grid:{xl:6,lg:6,md:8,sm:12,xs:24},grid2:{xl:8,lg:8,md:8,sm:12,xs:24},loading:!1,total:0,userFrom:{label_id:"",user_type:"",status:"",sex:"",is_promoter:"",country:"",isMember:"",pay_count_num:["",""],balance:["",""],integral:["",""],pay_count_money:["",""],recharge_count:["",""],user_time_type:"",user_time:"",before_pay_time:"",nickname:"",province:"",city:"",page:1,limit:15,level:"",group_id:"",field_key:""},before_pay_time:"",field_key:"",level:"",group_id:"",label_id:"",user_time_type:"",pay_count:"",userLists:[],FromData:null,selectionList:[],user_ids:"",selectedData:[],timeVal:[],groupList:[],levelList:[],labelFrom:{page:1,limit:""},labelLists:[],selectedIds:[],ids:[]}},computed:Object(l.a)({},Object(c.d)("media",["isMobile"])),created:function(){this.getList(),this.getCityList()},mounted:function(){this.userGroup(),this.levelLists()},methods:{getCityList:function(){var e=this;Object(k.b)().then((function(t){e.addresData=t.data}))},setUser:function(){var e=this,t=this.$refs.userEdit.formItem,a=[];this.$refs.userEdit.dataLabel.map((function(e){a.push(e.id)})),t.label_id=a,t.uid?Object(p.h)(t).then((function(t){e.modals=!1,e.$message.success(t.msg),e.getList()})).catch((function(t){e.$message.error(t)})):Object(p.G)(t).then((function(t){e.modals=!1,e.$message.success(t.msg),e.getList()})).catch((function(t){e.$message.error(t.msg)}))},onceGetList:function(){this.labelActive.uid=0,this.getList()},labelClose:function(){this.labelActive.uid=0,this.labelShow=!1,this.selectLabelShow=!1},putSend:function(e){var t=this;this.$refs[e].validate((function(a){if(a){if(!t.formInline.spread_uid)return t.$message.error("请上传用户");Object(h.c)(t.formInline).then((function(a){t.promoterShow=!1,t.$message.success(a.msg),t.getList(),t.$refs[e].resetFields()})).catch((function(e){t.$message.error(e.msg)}))}}))},save:function(){this.modals=!0},synchro:function(){var e=this;Object(p.X)().then((function(t){e.$message.success(t.msg)})).catch((function(t){e.$message.error(t.msg)}))},isSel:function(e){return!e.is_del},groupLists:function(){var e=this;this.loading=!0,Object(p.O)(this.labelFrom).then(function(){var t=Object(n.a)(Object(i.a)().mark((function t(a){var r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.data,e.labelLists=r.list;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message.error(t.msg)}))},onClickTab:function(){this.userFrom.page=1,this.getList()},userGroup:function(){var e=this;Object(p.L)({page:1,limit:""}).then((function(t){e.groupList=t.data.list}))},levelLists:function(){var e=this;Object(p.p)({page:1,limit:"",title:"",is_show:1}).then((function(t){e.levelList=t.data.list}))},setGroup:function(){var e,t=this;0===this.ids.length?this.$message.warning("请选择要设置分组的用户"):(e={uids:this.ids},this.$modalForm(Object(p.W)(e)).then((function(){t.ids=[],t.selectedIds=[],t.getList()})))},setLabel:function(){0===this.ids.length?this.$message.warning("请选择要设置标签的用户"):(this.ids,this.labelActive.uid=0,this.labelShow=!0)},activeSelectData:function(e){var t;this.selectLabelShow=!1,this.selectDataLabel=e||[],this.selectDataLabel.length?(t=[],this.selectDataLabel.map((function(e){t.push(e.id)})),this.userFrom.label_id=t.join(","),this.getList()):this.userFrom.label_id=""},handleClose:function(e){var t=this,a=this.selectDataLabel.findIndex((function(t){return t.id===e.id}));-1!==a&&this.selectDataLabel.splice(a,1),this.$nextTick((function(){var e;t.selectDataLabel.length?(e=[],t.selectDataLabel.map((function(t){e.push(t.id)})),t.userFrom.label_id=e.join(",")):t.userFrom.label_id=""}))},activeData:function(e){var t=this,a=[];e.length&&(e.map((function(e){a.push(e.id)})),Object(p.B)({uids:this.ids.join(","),label_id:a}).then((function(e){t.labelShow=!1,t.selectedIds=new Set,t.getList(),t.$message.success(e.msg)})))},changeMember:function(){this.userFrom.page=1,this.getList()},changeCountry:function(){"abroad"!==this.userFrom.country&&this.userFrom.country||(this.selectedData=[],this.userFrom.province="",this.userFrom.city="",this.address=[])},handleChange:function(e){this.selectedData=e.map((function(e){return e.label})),this.userFrom.province=this.selectedData[0],this.userFrom.city=this.selectedData[1]},onchangeTime:function(e,t){this.userFrom[t]=e?e.join("-"):""},userDetail:function(e){this.$refs.userDetails.modals=!0,this.$refs.userDetails.getDetails(e.uid)},changeMenu:function(e,t,a){var r=this,s=[],i=(s.push(e.uid),{uids:s});switch(t){case"1":this.edit(e);break;case"2":this.getOtherFrom(e.uid,"money");break;case"3":this.giveLevelTime(e.uid);break;case"4":this.del(e,"清除 【 "+this.tenText(e.nickname)+" 】的会员等级",a,"user");break;case"5":this.$modalForm(Object(p.W)(i)).then((function(){return r.getList()}));break;case"6":this.openLabel(e);break;case"7":this.editS(e);break;case"8":this.getOtherFrom(e.uid,"point");break;default:this.del(e,"解除【 "+this.tenText(e.nickname)+" 】的上级推广人",a,"tuiguang")}},tenText:function(e){return 10<e.length?e.substr(0,10)+"...":e},openLabel:function(e){this.labelShow=!0,this.labelActive.uid=e.uid},openSelectLabel:function(){this.selectLabelShow=!0},editS:function(e){this.promoterShow=!0,this.formInline.uid=e.uid},customer:function(){this.customerShow=!0},imageObject:function(e){this.customerShow=!1,this.formInline.spread_uid=e.uid,this.formInline.image=e.image},cancel:function(e){this.promoterShow=!1,this.$refs[e].resetFields(),this.formInline={uid:0,spread_uid:0,image:""}},giveLevel:function(e){var t=this;this.$modalForm(Object(p.k)(e)).then((function(){return t.getList(1)}))},giveLevelTime:function(e){var t=this;this.$modalForm(Object(p.l)(e)).then((function(){return t.getList(1)}))},del:function(e,t,a,r){var s=this;t={title:t,num:a,url:("user"===r?"user/del_level/":"agent/stair/delete_spread/").concat(e.uid),method:"user"===r?"DELETE":"PUT",ids:"",width:600};this.$modalSure(t).then((function(e){s.$message.success(e.msg),s.getList()})).catch((function(e){s.$message.error(e.msg)}))},submitModel:function(){this.getList()},getList:function(){var e=this;this.userFrom.user_type=this.userFrom.user_type||"",this.userFrom.status=this.userFrom.status||"",this.userFrom.sex=this.userFrom.sex||"",this.userFrom.is_promoter=this.userFrom.is_promoter||"",this.userFrom.country=this.userFrom.country||"",this.userFrom.pay_count="all"===this.pay_count?"":this.pay_count,this.userFrom.user_time_type="all"===this.user_time_type?"":this.user_time_type,this.userFrom.field_key="all"===this.field_key?"":this.field_key,this.userFrom.level="all"===this.level?"":this.level,this.userFrom.group_id="all"===this.group_id?"":this.group_id,this.loading=!0,Object(p.R)(this.userFrom).then(function(){var t=Object(n.a)(Object(i.a)().mark((function t(a){var r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.data,e.userLists=r.list,e.total=r.count,e.loading=!1,e.$nextTick((function(){e.setChecked()}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message.error(t.msg)}))},exportList:function(){var e=this;return Object(n.a)(Object(i.a)().mark((function t(){var a,r,s,n,l,o,c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.ids.length&&(e.userFrom.ids=e.ids),e.userFrom.user_type=e.userFrom.user_type||"",e.userFrom.status=e.userFrom.status||"",e.userFrom.sex=e.userFrom.sex||"",e.userFrom.is_promoter=e.userFrom.is_promoter||"",e.userFrom.country=e.userFrom.country||"",e.userFrom.pay_count="all"===e.pay_count?"":e.pay_count,e.userFrom.user_time_type="all"===e.user_time_type?"":e.user_time_type,e.userFrom.field_key="all"===e.field_key?"":e.field_key,e.userFrom.level="all"===e.level?"":e.level,e.userFrom.group_id="all"===e.group_id?"":e.group_id,a=[],r=[],s=[],n="",(l=JSON.parse(JSON.stringify(e.userFrom))).page=1,o=0;case 15:if(o<l.page+1)return t.next=18,e.getExcelData(l);t.next=32;break;case 18:c=t.sent,n=n||c.filename,r.length||(r=c.fileKey),a.length||(a=c.header),c.export.length?(s=s.concat(c.export),l.page++,t.next=29):t.next=27;break;case 27:return e.$exportExcel(a,r,n,s),t.abrupt("return");case 29:o++,t.next=15;break;case 32:case"end":return t.stop()}}),t)})))()},getExcelData:function(e){return new Promise((function(t,a){Object(b.h)(e).then((function(e){t(e.data)}))}))},pageChange:function(){this.selectionList=[],this.getList()},userSearchs:function(){this.userFrom.page=1,this.getList()},reset:function(e){this.userFrom=Object(s.a)(Object(s.a)({label_id:"",status:"",sex:"",is_promoter:"",country:"",isMember:"",pay_count_num:["",""],balance:["",""],integral:["",""],pay_count_money:["",""],recharge_count:["",""],user_time_type:"",user_time:"",before_pay_time:"",nickname:"",province:"",city:"",page:1,limit:15,level:"",group_id:"",field_key:""},"page",1),"limit",20),this.field_key="",this.level="",this.group_id="",this.dataLabel=[],this.selectDataLabel=[],this.user_time_type="",this.pay_count="",this.timeVal=[],this.selectedIds=new Set,this.getList()},getUserFrom:function(e){var t=this;Object(p.i)(e).then(function(){var e=Object(n.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.modals=!0,t.userData=a.data;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg)}))},getOtherFrom:function(e,t){var a=this;this.$modalForm(Object(p.g)(e,t)).then((function(){return a.getList(1)}))},onchangeIsShow:function(e){var t=this;e={id:e.uid,status:e.status};Object(p.o)(e).then(function(){var e=Object(n.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$message.success(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg)}))},onSend:function(){0===this.ids.length?this.$message.warning("请选择要发送优惠券的用户"):(this.$refs.sends.modals=!0,this.$refs.sends.getList())},onSendPic:function(){0===this.ids.length?this.$message.warning("请选择要发送图文消息的用户"):this.modal13=!0},edit:function(e){this.getUserFrom(e.uid)},submitFail:function(){},sortChanged:function(e,t,a){this.userFrom[e.prop]=e.order,this.getList()},handleSelectAll:function(e){var t=this,a=[];e.map((function(e){a.push(e.uid)})),this.selectedIds=a,this.$nextTick((function(){t.setChecked()}))},handleSelectRow:function(e,t){var a=this,r=[];e.map((function(e){r.push(e.uid)})),this.selectedIds=r,this.$nextTick((function(){a.setChecked()}))},setChecked:function(){this.ids=Object(r.a)(this.selectedIds);var e,t=this.$refs.table.objData;for(e in t)this.selectedIds.has(t[e].uid)&&(t[e]._isChecked=!0)}}},a("d29c"),_=Object(m.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"ivu-mt",attrs:{bordered:!1,shadow:"never","body-style":{padding:0}}},[t("div",{staticClass:"padding-add"},[t("el-form",{ref:"userFrom",attrs:{model:e.userFrom,"label-width":"80px","label-position":"right",inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[e.collapse?e._e():t("div",{staticClass:"acea-row search-form"},[t("div",[t("el-form-item",{attrs:{label:"用户搜索：","label-for":"nickname"}},[t("el-input",{staticClass:"form_content_width",attrs:{placeholder:"请输入用户",clearable:""},model:{value:e.userFrom.nickname,callback:function(t){e.$set(e.userFrom,"nickname",t)},expression:"userFrom.nickname"}},[t("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.field_key,callback:function(t){e.field_key=t},expression:"field_key"}},[t("el-option",{attrs:{value:"all",label:"全部"}}),t("el-option",{attrs:{value:"uid",label:"UID"}}),t("el-option",{attrs:{value:"phone",label:"手机号"}}),t("el-option",{attrs:{value:"nickname",label:"用户昵称"}})],1)],1)],1),t("el-form-item",{attrs:{label:"用户等级：","label-for":"level"}},[t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择用户等级",clearable:""},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},[t("el-option",{attrs:{value:"all",label:"全部"}},[e._v("全部")]),e._l(e.levelList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.name}})}))],2)],1),t("el-form-item",{attrs:{label:"用户分组："}},[t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择用户分组",clearable:""},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},[t("el-option",{attrs:{value:"all",label:"全部"}}),e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.group_name}})}))],2)],1)],1),t("el-form-item",{staticClass:"search-form-sub"},[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:e.userSearchs}},[e._v("搜索")]),t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"ResetSearch",on:{click:function(t){return e.reset("userFrom")}}},[e._v("重置")]),t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"ivu-ml-8 font12 ml10",on:{click:function(t){e.collapse=!e.collapse}}},[e.collapse?[e._v(" 收起 "),t("i",{staticClass:"el-icon-arrow-up"})]:[e._v(" 展开 "),t("i",{staticClass:"el-icon-arrow-down"})]],2)],1)],1),e.collapse?t("div",{staticClass:"acea-row search-form"},[t("div",{staticClass:"search-form-box"},[t("el-form-item",{attrs:{label:"用户搜索：","label-for":"nickname"}},[t("el-input",{staticClass:"form_content_width",attrs:{placeholder:"请输入用户",clearable:""},model:{value:e.userFrom.nickname,callback:function(t){e.$set(e.userFrom,"nickname",t)},expression:"userFrom.nickname"}},[t("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.field_key,callback:function(t){e.field_key=t},expression:"field_key"}},[t("el-option",{attrs:{value:"all",label:"全部"}}),t("el-option",{attrs:{value:"uid",label:"UID"}}),t("el-option",{attrs:{value:"phone",label:"手机号"}}),t("el-option",{attrs:{value:"nickname",label:"用户昵称"}})],1)],1)],1),t("el-form-item",{attrs:{label:"用户等级：","label-for":"level"}},[t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择用户等级",clearable:""},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},[t("el-option",{attrs:{value:"all",label:"全部"}},[e._v("全部")]),e._l(e.levelList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.name}})}))],2)],1),t("el-form-item",{attrs:{label:"用户分组："}},[t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择用户分组",clearable:""},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},[t("el-option",{attrs:{value:"all",label:"全部"}}),e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.group_name}})}))],2)],1),t("el-form-item",{attrs:{label:"用户标签：","label-for":"label_id"}},[t("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"labelInput acea-row row-between-wrapper",on:{click:e.openSelectLabel}},[t("div",{staticStyle:{width:"222px"}},[e.selectDataLabel.length?t("div",e._l(e.selectDataLabel,(function(a,r){return t("el-tag",{key:r,staticClass:"mr10",attrs:{closable:!1}},[e._v(e._s(a.label_name))])})),1):t("span",{staticClass:"span"},[e._v("选择用户关联标签")])]),t("div",{staticClass:"ivu-icon ivu-icon-ios-arrow-down"})])]),t("el-form-item",{attrs:{label:"用户身份："}},[t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择",clearable:""},model:{value:e.userFrom.is_promoter,callback:function(t){e.$set(e.userFrom,"is_promoter",t)},expression:"userFrom.is_promoter"}},[t("el-option",{attrs:{value:"",label:"全部"}}),t("el-option",{attrs:{value:"1",label:"推广员"}}),t("el-option",{attrs:{value:"0",label:"普通用户"}})],1)],1),t("el-form-item",{attrs:{label:"付费会员：","label-for":"isMember"}},[t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择",clearable:""},model:{value:e.userFrom.isMember,callback:function(t){e.$set(e.userFrom,"isMember",t)},expression:"userFrom.isMember"}},[t("el-option",{attrs:{value:"",label:"全部"}}),t("el-option",{attrs:{value:"1",label:"是"}}),t("el-option",{attrs:{value:"0",label:"否"}})],1)],1),t("el-form-item",{attrs:{label:"储值余额：","label-for":"balance"}},[t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最小值"},model:{value:e.userFrom.balance[0],callback:function(t){e.$set(e.userFrom.balance,0,t)},expression:"userFrom.balance[0]"}}),e._v("\n              ~\n              "),t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最大值"},model:{value:e.userFrom.balance[1],callback:function(t){e.$set(e.userFrom.balance,1,t)},expression:"userFrom.balance[1]"}})],1),t("el-form-item",{attrs:{label:"积分剩余：","label-for":"integral"}},[t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最小值"},model:{value:e.userFrom.integral[0],callback:function(t){e.$set(e.userFrom.integral,0,t)},expression:"userFrom.integral[0]"}}),e._v("\n              ~\n              "),t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最大值"},model:{value:e.userFrom.integral[1],callback:function(t){e.$set(e.userFrom.integral,1,t)},expression:"userFrom.integral[1]"}})],1),t("el-form-item",{attrs:{label:"上次消费：","label-for":"before_pay_time"}},[t("el-date-picker",{staticStyle:{width:"250px"},attrs:{clearable:"",type:"daterange",editable:!1,format:"yyyy/MM/dd","value-format":"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:function(t){return e.onchangeTime(t,"before_pay_time")}},model:{value:e.before_pay_time,callback:function(t){e.before_pay_time=t},expression:"before_pay_time"}})],1),t("el-form-item",{attrs:{label:"下单次数：","label-for":"pay_count"}},[t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最小值"},model:{value:e.userFrom.pay_count_num[0],callback:function(t){e.$set(e.userFrom.pay_count_num,0,t)},expression:"userFrom.pay_count_num[0]"}}),e._v("\n              ~\n              "),t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最大值"},model:{value:e.userFrom.pay_count_num[1],callback:function(t){e.$set(e.userFrom.pay_count_num,1,t)},expression:"userFrom.pay_count_num[1]"}})],1),t("el-form-item",{attrs:{label:"消费金额：","label-for":"store_name"}},[t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最小值"},model:{value:e.userFrom.pay_count_money[0],callback:function(t){e.$set(e.userFrom.pay_count_money,0,t)},expression:"userFrom.pay_count_money[0]"}}),e._v("\n              ~\n              "),t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最大值"},model:{value:e.userFrom.pay_count_money[1],callback:function(t){e.$set(e.userFrom.pay_count_money,1,t)},expression:"userFrom.pay_count_money[1]"}})],1),t("el-form-item",{attrs:{label:"充值次数：","label-for":"store_name"}},[t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最小值"},model:{value:e.userFrom.recharge_count[0],callback:function(t){e.$set(e.userFrom.recharge_count,0,t)},expression:"userFrom.recharge_count[0]"}}),e._v("\n              ~\n              "),t("el-input",{staticClass:"form_range_content_width",attrs:{clearable:"",placeholder:"最大值"},model:{value:e.userFrom.recharge_count[1],callback:function(t){e.$set(e.userFrom.recharge_count,1,t)},expression:"userFrom.recharge_count[1]"}})],1),t("el-form-item",{attrs:{label:"访问情况：","label-for":"user_time_type"}},[t("el-select",{staticClass:"form_content_width",attrs:{placeholder:"请选择访问情况",clearable:""},model:{value:e.user_time_type,callback:function(t){e.user_time_type=t},expression:"user_time_type"}},[t("el-option",{attrs:{value:"",label:"全部"}}),t("el-option",{attrs:{value:"visitno",label:"时间段未访问"}}),t("el-option",{attrs:{value:"visit",label:"时间段访问过"}}),t("el-option",{attrs:{value:"add_time",label:"首次访问"}})],1)],1),e.user_time_type?t("el-form-item",{attrs:{label:"访问时间：","label-for":"user_time"}},[t("el-date-picker",{staticStyle:{width:"250px"},attrs:{clearable:"",type:"daterange",editable:!1,format:"yyyy/MM/dd","value-format":"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:function(t){return e.onchangeTime(t,"user_time")}},model:{value:e.timeVal,callback:function(t){e.timeVal=t},expression:"timeVal"}})],1):e._e()],1),t("el-form-item",{staticClass:"search-form-sub"},[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary",label:"default"},on:{click:e.userSearchs}},[e._v("搜索")]),t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"ResetSearch",on:{click:function(t){return e.reset("userFrom")}}},[e._v("重置")]),t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"ivu-ml-8 font12 ml10",on:{click:function(t){e.collapse=!e.collapse}}},[e.collapse?[e._v(" 收起 "),t("i",{staticClass:"el-icon-arrow-up"})]:[e._v(" 展开 "),t("i",{staticClass:"el-icon-arrow-down"})]],2)],1)],1):e._e()])],1)]),t("el-card",{staticClass:"ivu-mt mt16",attrs:{bordered:!1,shadow:"never","body-style":{padding:"0 20px 20px"}}},[t("el-tabs",{on:{"tab-click":e.onClickTab},model:{value:e.userFrom.user_type,callback:function(t){e.$set(e.userFrom,"user_type",t)},expression:"userFrom.user_type"}},e._l(e.headeNum,(function(e,a){return t("el-tab-pane",{key:a,attrs:{label:e.name,name:e.type}})})),1),t("el-row",{attrs:{gutter:24,justify:"space-between"}},[t("el-col",{attrs:{span:24}},[t("el-button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-save"],expression:"['admin-user-save']"},{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:function(t){return e.edit({uid:0})}}},[e._v("添加用户")]),t("el-button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-coupon"],expression:"['admin-user-coupon']"},{name:"db-click",rawName:"v-db-click"}],on:{click:e.onSend}},[e._v("发送优惠券")]),"wechat"===e.userFrom.user_type?t("el-button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-wechat-news"],expression:"['admin-wechat-news']"},{name:"db-click",rawName:"v-db-click"}],staticClass:"greens mr10",on:{click:e.onSendPic}},[e._v("\n          发送图文消息\n        ")]):e._e(),t("el-button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-group_set"],expression:"['admin-user-group_set']"},{name:"db-click",rawName:"v-db-click"}],on:{click:e.setGroup}},[e._v("批量设置分组")]),t("el-button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-set_label"],expression:"['admin-user-set_label']"},{name:"db-click",rawName:"v-db-click"}],on:{click:e.setLabel}},[e._v("批量设置标签")]),t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"mr10",on:{click:e.exportList}},[e._v("导出")])],1),e.selectionList.length?t("el-col",{staticClass:"userAlert",attrs:{span:24}},[t("el-alert",{attrs:{"show-icon":""}},[t("template",{slot:"title"},[e._v("\n            已选择"),t("i",{staticClass:"userI"},[e._v(" "+e._s(e.selectionList.length)+" ")]),e._v("项\n          ")])],2)],1):e._e()],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticClass:"mt16",attrs:{data:e.userLists,"highlight-current-row":"","empty-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"sort-change":e.sortChanged,select:e.handleSelectRow,"select-all":e.handleSelectAll}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("expandRow",{attrs:{row:e.row}})]}}])}),t("el-table-column",{attrs:{type:"selection",selectable:e.isSel,width:"55"}}),t("el-table-column",{attrs:{label:"用户ID","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.uid))])]}}])}),t("el-table-column",{attrs:{label:"头像","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.row.avatar,expression:"scope.row.avatar"}]})])]}}])}),t("el-table-column",{attrs:{label:"姓名","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"acea-row"},[t("i",{directives:[{name:"show",rawName:"v-show",value:"男"===a.row.sex,expression:"scope.row.sex === '男'"}],staticClass:"el-icon-male",staticStyle:{color:"#2db7f5","font-size":"15px"}}),t("i",{directives:[{name:"show",rawName:"v-show",value:"女"===a.row.sex,expression:"scope.row.sex === '女'"}],staticClass:"el-icon-female",staticStyle:{color:"#ed4014","font-size":"15px"}}),t("div",{domProps:{textContent:e._s(a.row.nickname)}})]),1==a.row.is_del?t("div",{staticStyle:{color:"red"}},[e._v("用户已注销")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"付费会员","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.isMember?"是":"否"))])]}}])}),t("el-table-column",{attrs:{label:"用户等级","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.level))])]}}])}),t("el-table-column",{attrs:{label:"分组","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.group_id))])]}}])}),t("el-table-column",{attrs:{label:"手机号","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.phone))])]}}])}),t("el-table-column",{attrs:{label:"用户类型","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.user_type))])]}}])}),t("el-table-column",{attrs:{label:"余额",prop:"now_money","min-width":"100",sortable:!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.now_money))])]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[1!=a.row.is_del?[t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){return e.userDetail(a.row)}}},[e._v("详情")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-dropdown",{attrs:{size:"small",transfer:!0},on:{command:function(t){return e.changeMenu(a.row,t,a.$index)}}},[t("span",{staticClass:"el-dropdown-link"},[e._v("更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"2"}},[e._v("修改余额")]),t("el-dropdown-item",{attrs:{command:"8"}},[e._v("修改积分")]),t("el-dropdown-item",{attrs:{command:"3"}},[e._v("赠送会员")]),t("el-dropdown-item",{attrs:{command:"5"}},[e._v("设置分组")]),t("el-dropdown-item",{attrs:{command:"6"}},[e._v("设置标签")]),t("el-dropdown-item",{attrs:{command:"7"}},[e._v("修改上级推广人")]),a.row.spread_uid?t("el-dropdown-item",{attrs:{command:"99"}},[e._v("清除上级推广人")]):e._e()],1)],1)]:[t("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){return e.userDetail(a.row)}}},[e._v("详情")])]]}}])})],1),t("div",{staticClass:"acea-row row-right page"},[e.total?t("pagination",{attrs:{total:e.total,page:e.userFrom.page,limit:e.userFrom.limit},on:{"update:page":function(t){return e.$set(e.userFrom,"page",t)},"update:limit":function(t){return e.$set(e.userFrom,"limit",t)},pagination:e.pageChange}}):e._e()],1)],1),t("edit-from",{ref:"edits",attrs:{FromData:e.FromData},on:{submitFail:e.submitFail}}),t("send-from",{ref:"sends",attrs:{userIds:e.ids.toString()}}),t("user-details",{ref:"userDetails"}),t("el-dialog",{staticClass:"modelBox",attrs:{visible:e.modal13,title:"发送消息",width:"1200px"},on:{"update:visible":function(t){e.modal13=t}}},[e.modal13?t("news-category",{attrs:{isShowSend:e.isShowSend,userIds:e.ids.toString(),scrollerHeight:e.scrollerHeight,contentTop:e.contentTop,contentWidth:e.contentWidth,maxCols:e.maxCols}}):e._e()],1),t("el-dialog",{attrs:{visible:e.promoterShow,title:"修改推广人",width:"540px","show-close":!0},on:{"update:visible":function(t){e.promoterShow=t}}},[t("el-form",{ref:"formInline",attrs:{model:e.formInline,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[e.formInline?t("el-form-item",{attrs:{label:"选择推广人：",prop:"image"}},[t("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"picBox",on:{click:e.customer}},[e.formInline.image?t("div",{staticClass:"pictrue"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formInline.image,expression:"formInline.image"}]})]):t("div",{staticClass:"upLoad acea-row row-center-wrapper"},[t("i",{staticClass:"el-icon-user"})])])]):e._e()],1),t("div",{staticClass:"acea-row row-right mt20"},[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){return e.cancel("formInline")}}},[e._v("取消")]),t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:function(t){return e.putSend("formInline")}}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{visible:e.customerShow,title:"请选择商城用户","show-close":!0,width:"1000px"},on:{"update:visible":function(t){e.customerShow=t}}},[e.customerShow?t("customerInfo",{on:{imageObject:e.imageObject}}):e._e()],1),t("el-dialog",{attrs:{visible:e.labelShow,"append-to-body":"",title:"请选择用户标签",width:"540px","show-close":!0},on:{"update:visible":function(t){e.labelShow=t}}},[e.labelShow?t("userLabel",{attrs:{uid:e.labelActive.uid,only_get:!e.labelActive.uid},on:{close:e.labelClose,activeData:e.activeData,onceGetList:e.onceGetList}}):e._e()],1),t("el-drawer",{attrs:{"custom-class":"demo-drawer",visible:e.modals,wrapperClosable:!1,size:"720",title:"用户信息填写"},on:{"update:visible":function(t){e.modals=t}}},[t("div",{staticClass:"demo-drawer__content"},[e.modals?t("userEdit",{ref:"userEdit",attrs:{userData:e.userData}}):e._e(),t("div",{staticClass:"fix_footer acea-row row-center"},[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(t){e.modals=!1}}},[e._v("取消")]),t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:e.setUser}},[e._v("提交")])],1)],1)]),t("el-dialog",{attrs:{visible:e.selectLabelShow,"append-to-body":"",title:"请选择用户标签",width:"540px","show-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.selectLabelShow=t}}},[e.selectLabelShow?t("userLabel",{ref:"userLabel",attrs:{uid:0,only_get:!0,selectDataLabel:e.selectDataLabel},on:{activeData:e.activeSelectData,close:e.labelClose}}):e._e()],1)],1)}),[],!1,null,"67f99469",null);t.default=_.exports},"0faed":function(e,t,a){a("0fe9")},"0fe9":function(e,t,a){},"1efc":function(e,t,a){a("67de")},"2c3e":function(e,t,a){var r=a("83ab"),s=a("9f7f").MISSED_STICKY,i=a("c6b6"),n=a("edd0"),l=a("69f3").get,o=RegExp.prototype,c=TypeError;r&&s&&n(o,"sticky",{configurable:!0,get:function(){if(this!==o){if("RegExp"===i(this))return!!l(this).sticky;throw new c("Incompatible receiver, RegExp required")}}})},"3f2a":function(e,t,a){a.d(t,"h",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"j",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"g",(function(){return m})),a.d(t,"i",(function(){return p}));var r=a("6b6c");function s(e){return Object(r.a)({url:"/export/user_list",method:"get",params:e})}function i(e){return Object(r.a)({url:"/export/order_list",method:"get",params:e})}function n(e){return Object(r.a)({url:"/export/order_delivery_list",method:"get",params:e})}function l(e){return Object(r.a)({url:"/export/product_list",method:"get",params:e})}function o(e){return Object(r.a)({url:"/product/product_export",method:"get",params:e})}function c(e){return Object(r.a)({url:"/product/product_import",method:"post",data:e})}function u(e){return Object(r.a)({url:"/export/bargain_list",method:"get",params:e})}function d(e){return Object(r.a)({url:"/export/combination_list",method:"get",params:e})}function m(e){return Object(r.a)({url:"/export/seckill_list",method:"get",params:e})}function p(e){return Object(r.a)({url:"/export/member_card/".concat(e),method:"get"})}},"4d63":function(e,t,a){var r=a("83ab"),s=a("da84"),i=a("e330"),n=a("94ca"),l=a("7156"),o=a("9112"),c=a("7c73"),u=a("241c").f,d=a("3a9b"),m=a("44e7"),p=a("577e"),f=a("90d8"),h=a("9f7f"),b=a("aeb0"),_=a("cb2d"),v=a("d039"),g=a("1a2d"),w=a("69f3").enforce,y=a("2626"),k=a("b622"),x=a("fce3"),C=a("107c"),S=k("match"),F=s.RegExp,L=F.prototype,I=s.SyntaxError,O=i(L.exec),j=i("".charAt),$=i("".replace),D=i("".indexOf),N=i("".slice),E=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,R=/a/g,T=(a=new F(M)!==M,h.MISSED_STICKY),V=h.UNSUPPORTED_Y;k=r&&(!a||T||x||C||v((function(){return R[S]=!1,F(M)!==M||F(R)===R||"/a/i"!==String(F(M,"i"))})));if(n("RegExp",k)){for(var A=function(e,t){var a,r,s=d(L,this),i=m(e),n=void 0===t,u=[],h=e;if(!s&&i&&n&&e.constructor===A)return e;if((i||d(L,e))&&(e=e.source,n)&&(t=f(h)),e=void 0===e?"":p(e),t=void 0===t?"":p(t),h=e,i=t=x&&"dotAll"in M&&(a=!!t&&-1<D(t,"s"))?$(t,/s/g,""):t,T&&"sticky"in M&&(r=!!t&&-1<D(t,"y"))&&V&&(t=$(t,/y/g,"")),C&&(e=(n=function(e){for(var t,a=e.length,r=0,s="",i=[],n=c(null),l=!1,o=!1,u=0,d="";r<=a;r++){if("\\"===(t=j(e,r)))t+=j(e,++r);else if("]"===t)l=!1;else if(!l)switch(!0){case"["===t:l=!0;break;case"("===t:O(E,N(e,r+1))&&(r+=2,o=!0),s+=t,u++;continue;case">"===t&&o:if(""===d||g(n,d))throw new I("Invalid capture group name");n[d]=!0,o=!(i[i.length]=[d,u]),d="";continue}o?d+=t:s+=t}return[s,i]}(e))[0],u=n[1]),n=l(F(e,t),s?this:L,A),(a||r||u.length)&&(t=w(n),a&&(t.dotAll=!0,t.raw=A(function(e){for(var t,a=e.length,r=0,s="",i=!1;r<=a;r++)"\\"===(t=j(e,r))?s+=t+j(e,++r):i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),s+=t):s+="[\\s\\S]";return s}(e),i)),r&&(t.sticky=!0),u.length)&&(t.groups=u),e!==h)try{o(n,"source",""===h?"(?:)":h)}catch(e){}return n},P=u(F),U=0;P.length>U;)b(A,F,P[U++]);(L.constructor=A).prototype=L,_(s,"RegExp",A,{constructor:!0})}y("RegExp")},"61f7":function(e,t,a){a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return c}));var r=a("ade3"),s=a("5530");function i(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a,r,s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(a in s)new RegExp("(".concat(a,")")).test(t)&&(r=s[a]+"",t=t.replace(RegExp.$1,1===RegExp.$1.length?r:("00"+r).substr(r.length)));return t}a("99af"),a("13d5"),a("b64b"),a("d3b7"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("5319"),a("498a");var n={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};function l(e,t){e.message=function(e){return t.replace("%s",e||"")}}function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)({required:!0,message:e,type:"string"},t)}function c(e){return u.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,e)}l(o,"请输入%s"),l(c,"%s格式不正确");var u=Object.keys(n).reduce((function(e,t){return e[t]=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n="range"===t?{min:e[0],max:e[1]}:Object(r.a)({},t,e);return Object(s.a)(Object(s.a)({message:a.replace(":".concat(t),"range"===t?"".concat(e[0],"-").concat(e[1]):e),type:"string"},n),i)},l(e[t],n[t]),e}),{})},"67de":function(e,t,a){},"7c0b":function(e,t,a){a("8f88")},8776:function(e,t,a){},"8c03":function(e,t,a){a.r(t);var r=a("c7eb"),s=a("1da1"),i=(a("a15b"),a("d81d"),a("c73d"),a("90e7")),n={name:"index",data:function(){return{formValidate:{page:1,limit:15,data:"",nickname:""},tableList2:[],timeVal:[],fromList:{title:"选择时间",custom:!0,fromTxt:[{text:"全部",val:""},{text:"今天",val:"today"},{text:"昨天",val:"yesterday"},{text:"最近7天",val:"lately7"},{text:"最近30天",val:"lately30"},{text:"本月",val:"month"},{text:"本年",val:"year"}]},currentid:0,productRow:{},loading2:!1,total2:0}},created:function(){},mounted:function(){this.getListService()},methods:{onchangeTime:function(e){this.timeVal=e,this.formValidate.data=this.timeVal?this.timeVal.join("-"):"",this.getListService()},selectChange:function(e){this.formValidate.data=e,this.timeVal=[],this.getListService()},getListService:function(){var e=this;this.loading2=!0,Object(i.H)(this.formValidate).then(function(){var t=Object(s.a)(Object(r.a)().mark((function t(a){var s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=a.data,e.tableList2=s.list,e.total2=s.count,e.tableList2.map((function(e){e._isChecked=!1})),e.loading2=!1;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading2=!1,e.$message.error(t.msg)}))},userSearchs:function(){this.formValidate.page=1,this.getListService()},currentidRadio:function(e){self.currentid=e.uid,this.productRow=e,this.productRow.uid?"image"===this.$route.query.fodder?(e={image:this.productRow.headimgurl,uid:this.productRow.uid},form_create_helper.set("image",e),form_create_helper.close("image")):this.$emit("imageObject",{image:this.productRow.headimgurl,uid:this.productRow.uid}):this.$message.warning("请先选择商品")}}};a("0faed"),a=a("2877"),a=Object(a.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"customer"},[t("el-form",{ref:"formValidate",attrs:{model:e.formValidate,"label-width":"80px",inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"搜索用户："}},[t("el-input",{staticClass:"form_content_width",attrs:{clearable:"",placeholder:"请输入用户UID、昵称或手机号"},model:{value:e.formValidate.nickname,callback:function(t){e.$set(e.formValidate,"nickname",t)},expression:"formValidate.nickname"}})],1),t("el-form-item",[t("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:e.userSearchs}},[e._v("查询")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"selection",staticClass:"mt15",attrs:{"highlight-current-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果",data:e.tableList2,height:"450"}},[t("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{disabled:!!a.row.is_del,label:a.row.uid},on:{input:function(){return e.currentidRadio(a.row)}},model:{value:e.currentid,callback:function(t){e.currentid=t},expression:"currentid"}},[e._v(" ")])]}}])}),t("el-table-column",{attrs:{label:"UID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.uid))])]}}])}),t("el-table-column",{attrs:{label:"用户头像","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.row.headimgurl,expression:"scope.row.headimgurl"}]})])]}}])}),t("el-table-column",{attrs:{label:"用户昵称","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.nickname))]),t("div",{staticStyle:{color:"red"}},[e._v(e._s(a.row.is_del?"用户已注销":""))])]}}])}),t("el-table-column",{attrs:{label:"手机号","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.phone))])]}}])}),t("el-table-column",{attrs:{label:"是否关注公众号","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{domProps:{textContent:e._s(1===a.row.subscribe?"关注":"未关注")}})]}}])}),t("el-table-column",{attrs:{label:"注册时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.add_time))])]}}])})],1),t("div",{staticClass:"acea-row row-right page"},[e.total2?t("pagination",{attrs:{total:e.total2,page:e.formValidate.page,limit:e.formValidate.limit},on:{"update:page":function(t){return e.$set(e.formValidate,"page",t)},"update:limit":function(t){return e.$set(e.formValidate,"limit",t)},pagination:e.getListService}}):e._e()],1)],1)}),[],!1,null,"559966ff",null);t.default=a.exports},"8f88":function(e,t,a){},a93a:function(e,t,a){a("05cf")},bbbc:function(e,t,a){a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"r",(function(){return n})),a.d(t,"q",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"k",(function(){return c})),a.d(t,"j",(function(){return u})),a.d(t,"s",(function(){return d})),a.d(t,"m",(function(){return m})),a.d(t,"f",(function(){return p})),a.d(t,"g",(function(){return f})),a.d(t,"a",(function(){return h})),a.d(t,"e",(function(){return b})),a.d(t,"l",(function(){return _})),a.d(t,"d",(function(){return v})),a.d(t,"h",(function(){return g})),a.d(t,"p",(function(){return w})),a.d(t,"o",(function(){return y})),a.d(t,"n",(function(){return k})),a("99af");var r=a("6b6c");function s(e){return Object(r.a)({url:"agent/index",method:"get",params:e})}function i(e){return Object(r.a)({url:"agent/spread",method:"PUT",data:e})}function n(e){return Object(r.a)({url:"agent/statistics",method:"get",params:e})}function l(e,t){return Object(r.a)({url:e,method:"get",params:t})}function o(e){return Object(r.a)({url:"agent/look_code",method:"get",params:e})}function c(e){return Object(r.a)({url:"agent/look_xcx_code",method:"get",params:e})}function u(e){return Object(r.a)({url:"agent/look_h5_code",method:"get",params:e})}function d(e){return Object(r.a)({url:"export/userAgent",method:"get",params:e})}function m(e){return Object(r.a)({url:"agent/division/list",method:"get",params:e})}function p(e){return Object(r.a)({url:"agent/division/agent_apply/list",method:"get",params:e})}function f(e){return Object(r.a)({url:"agent/division/statistics",method:"get",params:e})}function h(e){return Object(r.a)({url:"agent/division/agent/create/".concat(e),method:"get"})}function b(e,t){return Object(r.a)({url:"agent/division/examine_apply/".concat(e,"/").concat(t),method:"get"})}function _(e){return Object(r.a)({url:"agent/division/create/".concat(e),method:"get"})}function v(e){return Object(r.a)({url:"agent/division/down_list",method:"get",params:e})}function g(e){return Object(r.a)({url:"agent/division/set_status/".concat(e.status,"/").concat(e.id),method:"put"})}function w(e){return Object(r.a)({url:"agent/division/staff/create/".concat(e),method:"get"})}function y(e){return Object(r.a)({url:"agent/spread/apply/list",method:"get",params:e})}function k(e,t,a,s){return Object(r.a)({url:"agent/spread/apply/examine/".concat(e,"/").concat(t,"/").concat(a),method:"post",data:s})}},c607:function(e,t,a){var r=a("83ab"),s=a("fce3"),i=a("c6b6"),n=a("edd0"),l=a("69f3").get,o=RegExp.prototype,c=TypeError;r&&s&&n(o,"dotAll",{configurable:!0,get:function(){if(this!==o){if("RegExp"===i(this))return!!l(this).dotAll;throw new c("Incompatible receiver, RegExp required")}}})},d29c:function(e,t,a){a("8776")}}]);